import{r as m,w as f,c as r}from"./app-Dpk2qVhs.js";function d(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")||e.startsWith("/")?e:`/storage/${e}`:null}function A(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e)}function D(e){const n=Math.floor(e);return Array.from({length:5},(u,s)=>s<n)}function P(e){const n=r(()=>e().variants??[]),u=m(n.value[0]?.id??null);f(()=>n.value,t=>{!u.value&&t?.length&&(u.value=t[0].id)},{immediate:!0});const s=r(()=>n.value.length?n.value.find(t=>t.id===u.value)??n.value[0]:null),l=r(()=>Number(s.value?.price??e().priceFrom??0)),i=r(()=>{const t=s.value?.compareAtPrice;return t!=null?Number(t):null}),h=r(()=>s.value?.inStock??!0),g=r(()=>!i.value||i.value<=l.value?null:Math.round((i.value-l.value)/i.value*100)),c=r(()=>{const t=e(),w=(t.media??[]).map(a=>({src:d(a.url)??"",alt:a.alt??t.name})),I=[...(s.value?.media??[]).map(a=>({src:d(a.url)??"",alt:a.alt??s.value?.name??t.name})),...w],v=new Set;return I.filter(a=>a.src&&(v.has(a.src)?!1:(v.add(a.src),!0)))}),o=m(0);f(c,()=>o.value=0);const p=r(()=>e().rating??0),y=r(()=>e().reviewsCount??0);return{variants:n,selectedVariantId:u,selectedVariant:s,price:l,compareAtPrice:i,inStock:h,discountPercent:g,galleryItems:c,activeImage:o,avgRating:p,reviewCount:y}}export{A as f,D as s,P as u};
