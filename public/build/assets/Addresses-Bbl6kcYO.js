import{_ as re}from"./Card-Bg0Kv25I.js";import{_ as T}from"./Button-DlP5TfEn.js";import{_ as z}from"./Icon-DLkENiec.js";import{_ as ne}from"./Badge-BrOriF3i.js";import{d as E,k as h,g as o,f as s,e as m,h as _,F as ee,l as te,c as V,t as k,b as N,j as S,i as g,E as le,G as j,w as X,r as D,q as de,H as Y,a as I,u as p,v as Z}from"./app-Ct9AQz3a.js";import{_ as ie}from"./Modal-CxM2Yew6.js";import{_ as ue}from"./SelectMenu-36JS-GAY.js";import{_ as ce}from"./Textarea-DUxTFtHE.js";import{_ as me}from"./Checkbox-CWKrCVZO.js";import{_ as fe}from"./FormField-DR3qO_4n.js";import{_ as pe}from"./Input-DKYkVkaK.js";import"./DialogTrigger-BCtGwlfO.js";import"./Presence-CTfVoSjs.js";import"./usePortal-BjiTY23K.js";import"./VisuallyHidden-BSn5Ae5a.js";import"./useLocale-QzNUJIp8.js";import"./PopperArrow-q2Y0TQCy.js";import"./utils-BSTWYaBh.js";import"./VisuallyHiddenInput-DDhaMnhq.js";import"./index-CygXWxiy.js";import"./RovingFocusItem-8kWj2Je9.js";import"./Label-CSxIoeop.js";const be={key:0,class:"py-12 text-center text-gray-500 dark:text-gray-400"},ve={class:"mt-4"},ge={key:1,class:"space-y-3"},ye={class:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between"},xe={class:"min-w-0"},_e={class:"flex flex-wrap items-center gap-2"},ke={class:"text-sm font-semibold text-gray-900 dark:text-white"},$e={class:"mt-1 text-sm text-gray-600 dark:text-gray-300"},he={class:"mt-2 text-sm text-gray-700 dark:text-gray-200"},we={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Ce={class:"flex flex-wrap items-center gap-2 sm:justify-end"},Ae=E({__name:"AddressList",props:{addresses:{},settingDefault:{}},emits:["create","edit","delete","setDefault"],setup(e){const b=e,x=V(()=>b.addresses.length>0);function c(u){return u||"—"}function a(u){const l=u.address_line2?`, ${u.address_line2}`:"",f=u.postal_code?`, ${u.postal_code}`:"";return`${u.address_line1}${l}, ${u.city_label}, ${u.province_label}${f}`}return(u,l)=>{const f=z,r=T,A=ne;return x.value?(g(),h("div",ge,[(g(!0),h(ee,null,te(e.addresses,v=>(g(),h("div",{key:v.id,class:"rounded-2xl border border-gray-200 bg-white/70 p-4 backdrop-blur dark:border-gray-800 dark:bg-gray-950/40"},[s("div",ye,[s("div",xe,[s("div",_e,[s("p",ke,k(v.label||"Alamat"),1),v.is_default?(g(),N(A,{key:0,label:"Default",color:"success",variant:"soft",size:"xs",class:"rounded-full"})):S("",!0)]),s("p",$e,k(v.recipient_name)+" • "+k(c(v.recipient_phone)),1),s("p",he,k(a(v)),1),v.description?(g(),h("p",we," Catatan: "+k(v.description),1)):S("",!0)]),s("div",Ce,[v.is_default?S("",!0):(g(),N(r,{key:0,color:"neutral",variant:"outline",size:"sm",class:"rounded-xl",icon:"i-lucide-check",loading:!!e.settingDefault[String(v.id)],onClick:w=>u.$emit("setDefault",v)},{default:m(()=>[...l[4]||(l[4]=[_(" Jadikan Default ",-1)])]),_:1},8,["loading","onClick"])),o(r,{color:"neutral",variant:"outline",size:"sm",class:"rounded-xl",icon:"i-lucide-pencil",onClick:w=>u.$emit("edit",v)},{default:m(()=>[...l[5]||(l[5]=[_(" Edit ",-1)])]),_:1},8,["onClick"]),o(r,{color:"error",variant:"soft",size:"sm",class:"rounded-xl",icon:"i-lucide-trash-2",onClick:w=>u.$emit("delete",v)},{default:m(()=>[...l[6]||(l[6]=[_(" Hapus ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),h("div",be,[o(f,{name:"i-lucide-map-pin",class:"mx-auto size-10 opacity-40"}),l[2]||(l[2]=s("p",{class:"mt-3 text-sm"},"Belum ada alamat tersimpan.",-1)),l[3]||(l[3]=s("p",{class:"mt-1 text-xs"},"Tambahkan alamat untuk mempercepat proses checkout.",-1)),s("div",ve,[o(r,{color:"primary",variant:"solid",class:"rounded-xl",icon:"i-lucide-plus",onClick:l[0]||(l[0]=v=>u.$emit("create"))},{default:m(()=>[...l[1]||(l[1]=[_(" Tambah Alamat Pertama ",-1)])]),_:1})])]))}}}),De={class:"w-full max-w-2xl space-y-4"},Ve={class:"grid w-full grid-cols-1 gap-3 sm:grid-cols-2"},Ue={class:"w-full"},Ie={class:"mt-2 flex items-center gap-2"},Se={class:"grid w-full grid-cols-1 gap-3 sm:grid-cols-2"},Ne={class:"grid w-full grid-cols-1 gap-3 sm:grid-cols-2"},je={class:"space-y-2"},Be={key:0,class:"text-xs text-amber-600 dark:text-amber-300"},Fe={class:"space-y-2"},Pe={key:0,class:"text-xs text-amber-600 dark:text-amber-300"},Ke={class:"grid w-full grid-cols-1 gap-3 sm:grid-cols-2"},Te={class:"space-y-2"},Ee={key:0,class:"text-xs text-amber-600 dark:text-amber-300"},Me={class:"grid w-full grid-cols-1 gap-3 sm:grid-cols-2"},Oe={key:0,class:"rounded-2xl border border-rose-200 bg-rose-50 p-3 text-sm text-rose-700 dark:border-rose-900/50 dark:bg-rose-950/40 dark:text-rose-200"},ze={class:"mt-1 list-disc pl-5 space-y-1"},qe={class:"flex flex-col-reverse gap-2 pt-2 sm:flex-row sm:items-center sm:justify-between"},He={class:"flex gap-2"},Le=E({__name:"AddressFormModal",props:j({mode:{},form:{},errors:{},submitting:{type:Boolean},provinceItems:{},cityItems:{},districtItems:{}},{open:{type:Boolean,required:!0},openModifiers:{}}),emits:j(["submit","reset"],["update:open"]),setup(e){const b=le(e,"open"),x=e,c=V(()=>x.mode==="create"?"Tambah Alamat":"Edit Alamat"),a=V(()=>x.mode==="create"?"Isi detail alamat untuk pengiriman & checkout.":"Perbarui detail alamat yang sudah tersimpan.");return(u,l)=>{const f=pe,r=fe,A=me,v=ce,w=ue,t=T,U=ie;return g(),N(U,{open:b.value,"onUpdate:open":l[16]||(l[16]=n=>b.value=n),title:c.value,description:a.value,scrollable:""},{body:m(()=>[s("div",De,[s("div",Ve,[o(r,{label:"Label (opsional)",class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.label,"onUpdate:modelValue":l[0]||(l[0]=n=>e.form.label=n),placeholder:"Contoh: Rumah, Kantor",class:"w-full"},null,8,["modelValue"])]),_:1}),s("div",Ue,[l[18]||(l[18]=s("p",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Jadikan default",-1)),l[19]||(l[19]=s("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Default dipakai otomatis saat checkout.",-1)),s("div",Ie,[o(A,{modelValue:e.form.is_default,"onUpdate:modelValue":l[1]||(l[1]=n=>e.form.is_default=n)},null,8,["modelValue"]),l[17]||(l[17]=s("span",{class:"text-sm text-gray-700 dark:text-gray-200"},"Set sebagai alamat utama",-1))])])]),s("div",Se,[o(r,{label:"Nama penerima",required:"",error:e.errors.recipient_name,class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.recipient_name,"onUpdate:modelValue":l[2]||(l[2]=n=>e.form.recipient_name=n),placeholder:"Nama lengkap",class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"]),o(r,{label:"No. HP penerima",required:"",error:e.errors.recipient_phone,class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.recipient_phone,"onUpdate:modelValue":l[3]||(l[3]=n=>e.form.recipient_phone=n),placeholder:"08xxxxxxxxxx",class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"])]),o(r,{label:"Alamat utama",required:"",error:e.errors.address_line1,class:"w-full"},{default:m(()=>[o(v,{modelValue:e.form.address_line1,"onUpdate:modelValue":l[4]||(l[4]=n=>e.form.address_line1=n),placeholder:"Jalan, RT/RW, nomor, patokan...",rows:3,class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"]),o(r,{label:"Alamat tambahan (opsional)",class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.address_line2,"onUpdate:modelValue":l[5]||(l[5]=n=>e.form.address_line2=n),placeholder:"Contoh: Blok A No. 12",class:"w-full"},null,8,["modelValue"])]),_:1}),s("div",Ne,[o(r,{label:"Provinsi",required:"",error:e.errors.province_id||e.errors.province_label,class:"w-full"},{default:m(()=>[s("div",je,[o(w,{modelValue:e.form.province_id,"onUpdate:modelValue":l[6]||(l[6]=n=>e.form.province_id=n),items:e.provinceItems,"value-key":"value","label-key":"label",placeholder:"Pilih provinsi",disabled:e.provinceItems.length===0,class:"w-full"},null,8,["modelValue","items","disabled"]),e.provinceItems.length===0?(g(),h("p",Be," Data target pengiriman untuk provinsi belum tersedia. ")):S("",!0)])]),_:1},8,["error"]),o(r,{label:"Kota/Kab",required:"",error:e.errors.city_id||e.errors.city_label,class:"w-full"},{default:m(()=>[s("div",Fe,[o(w,{modelValue:e.form.city_id,"onUpdate:modelValue":l[7]||(l[7]=n=>e.form.city_id=n),items:e.cityItems,"value-key":"value","label-key":"label",placeholder:"Pilih kota/kab",disabled:!e.form.province_id||e.cityItems.length===0,class:"w-full"},null,8,["modelValue","items","disabled"]),e.form.province_id&&e.cityItems.length===0?(g(),h("p",Pe," Kota/Kab untuk provinsi ini belum tersedia di target pengiriman. ")):S("",!0)])]),_:1},8,["error"])]),s("div",Ke,[o(r,{label:"Kecamatan",required:"",error:e.errors.district,class:"w-full"},{default:m(()=>[s("div",Te,[o(w,{modelValue:e.form.district,"onUpdate:modelValue":l[8]||(l[8]=n=>e.form.district=n),items:e.districtItems,"value-key":"value","label-key":"label",placeholder:"Pilih kecamatan",disabled:!e.form.city_id||e.districtItems.length===0,class:"w-full"},null,8,["modelValue","items","disabled"]),e.form.city_id&&e.districtItems.length===0?(g(),h("p",Ee," Kecamatan untuk kota ini belum tersedia di target pengiriman. ")):S("",!0)])]),_:1},8,["error"]),o(r,{label:"District Lion (auto)",error:e.errors.district_lion,class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.district_lion,"onUpdate:modelValue":l[9]||(l[9]=n=>e.form.district_lion=n),placeholder:"Terisi otomatis dari target pengiriman",readonly:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"])]),s("div",Me,[o(r,{label:"Kode pos (opsional)",error:e.errors.postal_code,class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.postal_code,"onUpdate:modelValue":l[10]||(l[10]=n=>e.form.postal_code=n),placeholder:"12345",class:"w-full"},null,8,["modelValue"])]),_:1},8,["error"]),o(r,{label:"Negara",class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.country,"onUpdate:modelValue":l[11]||(l[11]=n=>e.form.country=n),placeholder:"Indonesia",class:"w-full"},null,8,["modelValue"])]),_:1})]),o(r,{label:"Catatan (opsional)",class:"w-full"},{default:m(()=>[o(f,{modelValue:e.form.description,"onUpdate:modelValue":l[12]||(l[12]=n=>e.form.description=n),placeholder:"Contoh: Titip satpam / rumah pagar hitam",class:"w-full"},null,8,["modelValue"])]),_:1}),Object.keys(e.errors).length?(g(),h("div",Oe,[l[20]||(l[20]=s("p",{class:"font-semibold"},"Periksa kembali:",-1)),s("ul",ze,[(g(!0),h(ee,null,te(e.errors,(n,B)=>(g(),h("li",{key:B},k(n),1))),128))])])):S("",!0),s("div",qe,[o(t,{color:"neutral",variant:"outline",class:"rounded-xl",disabled:e.submitting,onClick:l[13]||(l[13]=n=>b.value=!1)},{default:m(()=>[...l[21]||(l[21]=[_(" Batal ",-1)])]),_:1},8,["disabled"]),s("div",He,[o(t,{color:"neutral",variant:"ghost",class:"rounded-xl",disabled:e.submitting,onClick:l[14]||(l[14]=n=>u.$emit("reset"))},{default:m(()=>[...l[22]||(l[22]=[_(" Reset ",-1)])]),_:1},8,["disabled"]),o(t,{color:"primary",variant:"solid",class:"rounded-xl",loading:e.submitting,onClick:l[15]||(l[15]=n=>u.$emit("submit"))},{default:m(()=>[_(k(e.mode==="create"?"Simpan":"Update"),1)]),_:1},8,["loading"])])])])]),_:1},8,["open","title","description"])}}}),Re={class:"w-full max-w-lg space-y-3"},Je={class:"rounded-2xl border border-gray-200 bg-white/70 p-4 backdrop-blur dark:border-gray-800 dark:bg-gray-950/40"},Ge={class:"text-sm font-semibold text-gray-900 dark:text-white"},We={class:"mt-1 text-sm text-gray-600 dark:text-gray-300"},Qe={class:"mt-2 text-sm text-gray-700 dark:text-gray-200"},Xe={class:"rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-800 dark:border-amber-900/50 dark:bg-amber-950/40 dark:text-amber-200"},Ye={class:"flex items-start gap-2"},Ze={class:"flex flex-col-reverse gap-2 pt-2 sm:flex-row sm:items-center sm:justify-between"},et=E({__name:"AddressDeleteConfirmModal",props:j({address:{},deleting:{type:Boolean}},{open:{type:Boolean,required:!0},openModifiers:{}}),emits:j(["confirm"],["update:open"]),setup(e){const b=le(e,"open");function x(c){const a=c.address_line2?`, ${c.address_line2}`:"",u=c.postal_code?`, ${c.postal_code}`:"";return`${c.address_line1}${a}, ${c.city_label}, ${c.province_label}${u}`}return(c,a)=>{const u=z,l=T,f=ie;return g(),N(f,{open:b.value,"onUpdate:open":a[2]||(a[2]=r=>b.value=r),title:"Hapus alamat",description:"Aksi ini tidak bisa dibatalkan."},{body:m(()=>[s("div",Re,[s("div",Je,[s("p",Ge,k(e.address?.label||"Alamat"),1),s("p",We,k(e.address?.recipient_name)+" • "+k(e.address?.recipient_phone),1),s("p",Qe,k(e.address?x(e.address):""),1)]),s("div",Xe,[s("div",Ye,[o(u,{name:"i-lucide-alert-triangle",class:"mt-0.5 size-4"}),a[3]||(a[3]=s("p",null,"Pastikan alamat ini tidak diperlukan untuk pengiriman berikutnya.",-1))])]),s("div",Ze,[o(l,{color:"neutral",variant:"outline",class:"rounded-xl",disabled:e.deleting,onClick:a[0]||(a[0]=r=>b.value=!1)},{default:m(()=>[...a[4]||(a[4]=[_(" Batal ",-1)])]),_:1},8,["disabled"]),o(l,{color:"error",variant:"solid",class:"rounded-xl",loading:e.deleting,onClick:a[1]||(a[1]=r=>c.$emit("confirm"))},{default:m(()=>[...a[5]||(a[5]=[_(" Hapus Permanen ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["open"])}}}),tt={class:"w-full max-w-2xl space-y-4"},lt={class:"rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-800 dark:border-amber-900/50 dark:bg-amber-950/40 dark:text-amber-200"},it={class:"flex items-start gap-2"},st={class:"rounded-2xl border border-gray-200 bg-white/70 p-4 backdrop-blur dark:border-gray-800 dark:bg-gray-950/40"},at={class:"mt-1 text-sm text-gray-700 dark:text-gray-200"},ot={class:"space-y-2"},rt={key:0,class:"rounded-2xl border border-dashed border-gray-300 p-4 text-sm text-gray-600 dark:border-gray-700 dark:text-gray-300"},nt={class:"mt-3"},dt={key:1,class:"grid grid-cols-1 gap-3 sm:grid-cols-2"},ut={class:"truncate text-sm font-semibold text-gray-900 dark:text-white"},ct={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},mt={class:"mt-2 line-clamp-2 text-sm text-gray-700 dark:text-gray-200"},ft={class:"mt-3"},pt={class:"flex justify-end pt-2"},bt=E({__name:"AddressDefaultSwitchModal",props:j({selectedAddress:{},otherAddresses:{},settingDefault:{}},{open:{type:Boolean,required:!0},openModifiers:{}}),emits:j(["createAddress","setDefaultContinue"],["update:open"]),setup(e){const b=le(e,"open");function x(c){const a=c.address_line2?`, ${c.address_line2}`:"",u=c.postal_code?`, ${c.postal_code}`:"";return`${c.address_line1}${a}, ${c.city_label}, ${c.province_label}${u}`}return(c,a)=>{const u=z,l=T,f=ie;return g(),N(f,{open:b.value,"onUpdate:open":a[2]||(a[2]=r=>b.value=r),title:"Tidak bisa hapus alamat default",description:"Ubah default terlebih dulu."},{body:m(()=>[s("div",tt,[s("div",lt,[s("div",it,[o(u,{name:"i-lucide-info",class:"mt-0.5 size-4"}),a[3]||(a[3]=s("div",{class:"min-w-0"},[s("p",{class:"font-semibold"},"Instruksi"),s("ol",{class:"mt-1 list-decimal pl-5 space-y-1"},[s("li",null,[_("Pilih alamat lain untuk dijadikan "),s("b",null,"Default"),_(".")]),s("li",null,"Setelah default berubah, lanjutkan proses hapus.")])],-1))])]),s("div",st,[a[4]||(a[4]=s("p",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Alamat yang ingin dihapus:",-1)),s("p",at,k(e.selectedAddress?.label||"Alamat")+" — "+k(e.selectedAddress?x(e.selectedAddress):""),1)]),s("div",ot,[a[8]||(a[8]=s("p",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Pilih default baru:",-1)),e.otherAddresses.length===0?(g(),h("div",rt,[a[6]||(a[6]=_(" Kamu belum punya alamat lain. Tambahkan alamat baru dulu, lalu coba hapus lagi. ",-1)),s("div",nt,[o(l,{color:"primary",variant:"solid",class:"rounded-xl",icon:"i-lucide-plus",onClick:a[0]||(a[0]=r=>c.$emit("createAddress"))},{default:m(()=>[...a[5]||(a[5]=[_(" Tambah alamat ",-1)])]),_:1})])])):(g(),h("div",dt,[(g(!0),h(ee,null,te(e.otherAddresses,r=>(g(),h("div",{key:r.id,class:"rounded-2xl border border-gray-200 bg-white/70 p-4 backdrop-blur dark:border-gray-800 dark:bg-gray-950/40"},[s("p",ut,k(r.label||"Alamat"),1),s("p",ct,k(r.recipient_name)+" • "+k(r.recipient_phone),1),s("p",mt,k(x(r)),1),s("div",ft,[o(l,{color:"primary",variant:"soft",size:"sm",class:"rounded-xl",loading:!!e.settingDefault[String(r.id)],onClick:A=>c.$emit("setDefaultContinue",r)},{default:m(()=>[...a[7]||(a[7]=[_(" Jadikan Default & Lanjut Hapus ",-1)])]),_:1},8,["loading","onClick"])])]))),128))]))]),s("div",pt,[o(l,{color:"neutral",variant:"outline",class:"rounded-xl",onClick:a[1]||(a[1]=r=>b.value=!1)},{default:m(()=>[...a[9]||(a[9]=[_(" Tutup ",-1)])]),_:1})])])]),_:1},8,["open"])}}});function vt(e){return Array.isArray(e)?e.map(b=>String(b)).join(" "):e?String(e):""}function gt(e){const b=D(!1),x=D(!1),c=D(!1),a=D("create"),u=D(!1),l=D(!1),f=D({}),r=D(null),A=D(null),v=D({}),w=D(!1),t=de({label:"",is_default:!1,recipient_name:"",recipient_phone:"",address_line1:"",address_line2:"",province_label:"",province_id:0,city_label:"",city_id:0,district:"",district_lion:"",postal_code:"",country:"Indonesia",description:""}),U=V(()=>e.provinces.value.map(i=>({label:i.label,value:i.id}))),n=V(()=>{const i=Number(t.province_id||0);return i?e.cities.value.filter(d=>Number(d.province_id)===i).map(d=>({label:d.label,value:d.id})):[]}),B=V(()=>{const i=Number(t.province_id||0),d=Number(t.city_id||0);return!i||!d?[]:e.districts.value.filter(y=>Number(y.province_id)===i&&Number(y.city_id)===d).map(y=>({label:y.label,value:y.label}))}),q=V(()=>{const i=A.value;return i?e.addresses.value.filter(d=>d.id!==i.id):[]});X(()=>t.province_id,i=>{if(w.value)return;const d=Number(i||0);if(!d){t.province_label="",t.city_id=0,t.city_label="",t.district="",t.district_lion="";return}const y=U.value.find($=>$.value===d);y&&(t.province_label=y.label),t.city_id=0,t.city_label="",t.district="",t.district_lion=""}),X(()=>t.city_id,i=>{if(w.value)return;const d=Number(i||0);if(!d){t.city_label="",t.district="",t.district_lion="";return}const y=n.value.find($=>$.value===d);y&&(t.city_label=y.label),t.district="",t.district_lion=""}),X(()=>t.district,i=>{if(w.value)return;const d=i.trim();if(!d||!t.city_id||!t.province_id){t.district_lion="";return}const y=e.districts.value.find($=>Number($.province_id)===Number(t.province_id)&&Number($.city_id)===Number(t.city_id)&&$.label===d);t.district_lion=y?.district_lion??""});function F(){v.value={}}function P(){t.label="",t.is_default=!1,t.recipient_name="",t.recipient_phone="",t.address_line1="",t.address_line2="",t.province_label="",t.province_id=0,t.city_label="",t.city_id=0,t.district="",t.district_lion="",t.postal_code="",t.country="Indonesia",t.description="",F()}function H(i){w.value=!0,t.label=i.label??"",t.is_default=!!i.is_default,t.recipient_name=i.recipient_name??"",t.recipient_phone=i.recipient_phone??"",t.address_line1=i.address_line1??"",t.address_line2=i.address_line2??"",t.province_label=i.province_label??"",t.province_id=Number(i.province_id??0),t.city_label=i.city_label??"",t.city_id=Number(i.city_id??0),t.district=i.district??"",t.district_lion=i.district_lion??"",t.postal_code=i.postal_code??"",t.country=i.country??"Indonesia",t.description=i.description??"",F(),Y(()=>{w.value=!1})}function L(){const i={};return t.recipient_name.trim()||(i.recipient_name="Nama penerima wajib diisi."),t.recipient_phone.trim()?t.recipient_phone.replace(/\D/g,"").length<8&&(i.recipient_phone="No. HP terlalu pendek."):i.recipient_phone="No. HP wajib diisi.",t.address_line1.trim()||(i.address_line1="Alamat utama wajib diisi."),t.province_id||(i.province_id="Provinsi wajib dipilih/diisi."),t.city_id||(i.city_id="Kota/Kab wajib dipilih/diisi."),t.district.trim()||(i.district="Kecamatan wajib dipilih."),t.postal_code&&t.postal_code.trim().length>0&&t.postal_code.trim().length<5&&(i.postal_code="Kode pos minimal 5 karakter."),v.value=i,Object.keys(i).length===0}function M(i){v.value=Object.fromEntries(Object.entries(i??{}).map(([d,y])=>[d,vt(y)]).filter(d=>d[1].length>0))}function K(){I.reload({only:["addresses","defaultAddress","provinces","cities","districts"]})}function O(){a.value="create",r.value=null,P(),b.value=!0}function R(i){a.value="edit",r.value=i,H(i),b.value=!0}function J(){if(F(),!L())return;u.value=!0;const i={label:t.label||null,is_default:!!t.is_default,recipient_name:t.recipient_name,recipient_phone:t.recipient_phone,address_line1:t.address_line1,address_line2:t.address_line2||null,province_label:t.province_label,province_id:Number(t.province_id),city_label:t.city_label,city_id:Number(t.city_id),district:t.district||null,district_lion:t.district_lion||null,postal_code:t.postal_code||null,country:t.country||"Indonesia",description:t.description||null},d=()=>{b.value=!1,P(),K()},y=oe=>{M(oe)},$=()=>{u.value=!1};if(a.value==="create"){I.post("/account/addresses",i,{preserveScroll:!0,onSuccess:d,onError:y,onFinish:$});return}const ae=r.value?.id;if(!ae){u.value=!1;return}I.put(`/account/addresses/${ae}`,i,{preserveScroll:!0,onSuccess:d,onError:y,onFinish:$})}function G(i){const d=String(i.id);f.value[d]=!0,I.post(`/account/addresses/${i.id}/default`,{},{preserveScroll:!0,onSuccess:()=>{K()},onFinish:()=>{f.value[d]=!1}})}function W(i){if(A.value=i,i.is_default){c.value=!0;return}x.value=!0}function Q(){const i=A.value;i&&(l.value=!0,I.delete(`/account/addresses/${i.id}`,{preserveScroll:!0,onSuccess:()=>{x.value=!1,A.value=null,K()},onFinish:()=>{l.value=!1}}))}function se(i){if(!A.value)return;const d=String(i.id);f.value[d]=!0,I.post(`/account/addresses/${i.id}/default`,{},{preserveScroll:!0,onSuccess:()=>{c.value=!1,I.reload({only:["addresses","defaultAddress","provinces","cities","districts"],onSuccess:()=>{Y(()=>{x.value=!0})}})},onFinish:()=>{f.value[d]=!1}})}function C(){c.value=!1,Y(()=>{O()})}return{formOpen:b,deleteOpen:x,blockedOpen:c,formMode:a,submitting:u,deleting:l,settingDefault:f,selectedForDelete:A,otherAddressesForDefault:q,form:t,errors:v,provinceItems:U,cityItems:n,districtItems:B,resetForm:P,openCreate:O,openEdit:R,submitForm:J,setAsDefault:G,requestDelete:W,confirmDelete:Q,setDefaultThenContinueDelete:se,closeBlockedAndOpenCreate:C}}const yt={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},xt={class:"flex items-center gap-3"},_t={class:"flex items-center gap-2"},qt=E({__name:"Addresses",props:{addresses:{},provinces:{},cities:{},districts:{}},setup(e){const b=e,x=V(()=>b.addresses??[]),c=V(()=>b.provinces??[]),a=V(()=>b.cities??[]),u=V(()=>b.districts??[]),{formOpen:l,deleteOpen:f,blockedOpen:r,formMode:A,submitting:v,deleting:w,settingDefault:t,selectedForDelete:U,otherAddressesForDefault:n,form:B,errors:q,provinceItems:F,cityItems:P,districtItems:H,resetForm:L,openCreate:M,openEdit:K,submitForm:O,setAsDefault:R,requestDelete:J,confirmDelete:G,setDefaultThenContinueDelete:W,closeBlockedAndOpenCreate:Q}=gt({addresses:x,provinces:c,cities:a,districts:u});return(se,C)=>{const i=z,d=T,y=re;return g(),N(y,{class:"rounded-2xl"},{header:m(()=>[s("div",yt,[s("div",xt,[o(i,{name:"i-lucide-map-pin",class:"size-5 text-gray-500 dark:text-gray-300"}),C[3]||(C[3]=s("div",null,[s("p",{class:"text-base font-semibold text-gray-900 dark:text-white"},"Alamat"),s("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Kelola alamat pengiriman untuk checkout lebih cepat. ")],-1))]),s("div",_t,[o(d,{color:"primary",variant:"soft",size:"sm",class:"rounded-xl",icon:"i-lucide-plus",onClick:p(M)},{default:m(()=>[...C[4]||(C[4]=[_(" Tambah Alamat ",-1)])]),_:1},8,["onClick"]),o(d,{to:"/account/addresses",color:"neutral",variant:"outline",size:"sm",class:"rounded-xl"},{default:m(()=>[...C[5]||(C[5]=[_(" Lihat Semua ",-1)])]),_:1})])])]),default:m(()=>[o(Ae,{addresses:x.value,"setting-default":p(t),onCreate:p(M),onEdit:p(K),onDelete:p(J),onSetDefault:p(R)},null,8,["addresses","setting-default","onCreate","onEdit","onDelete","onSetDefault"]),o(Le,{open:p(l),"onUpdate:open":C[0]||(C[0]=$=>Z(l)?l.value=$:null),mode:p(A),form:p(B),errors:p(q),submitting:p(v),"province-items":p(F),"city-items":p(P),"district-items":p(H),onSubmit:p(O),onReset:p(L)},null,8,["open","mode","form","errors","submitting","province-items","city-items","district-items","onSubmit","onReset"]),o(et,{open:p(f),"onUpdate:open":C[1]||(C[1]=$=>Z(f)?f.value=$:null),address:p(U),deleting:p(w),onConfirm:p(G)},null,8,["open","address","deleting","onConfirm"]),o(bt,{open:p(r),"onUpdate:open":C[2]||(C[2]=$=>Z(r)?r.value=$:null),"selected-address":p(U),"other-addresses":p(n),"setting-default":p(t),onCreateAddress:p(Q),onSetDefaultContinue:p(W)},null,8,["open","selected-address","other-addresses","setting-default","onCreateAddress","onSetDefaultContinue"])]),_:1})}}});export{qt as default};
