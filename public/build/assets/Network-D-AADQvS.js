import{_ as H}from"./Card-Bg0Kv25I.js";import{U as ve,a as te,c as g,r as _,d as B,k as w,f as t,b as I,e as h,h as P,j as z,t as k,g as c,F as Q,l as W,V as ge,i as f,x as E,N as xe,S as be,u as r}from"./app-Ct9AQz3a.js";import{u as he}from"./useToast-DVWuh0M_.js";import{_ as le}from"./Input-DKYkVkaK.js";import{_ as X}from"./Button-DlP5TfEn.js";import{_ as ke}from"./Modal-CxM2Yew6.js";import{_ as ne}from"./Badge-BrOriF3i.js";import{_ as ye}from"./Alert-DqUIHgZi.js";import{_ as oe}from"./Icon-DLkENiec.js";import{_ as we}from"./Empty-C2M2wGtg.js";import"./DialogTrigger-BCtGwlfO.js";import"./Presence-CTfVoSjs.js";import"./usePortal-BjiTY23K.js";import"./VisuallyHidden-BSn5Ae5a.js";import"./useLocale-QzNUJIp8.js";function $e(e,m){const o=he(),i=_(!1),u=_(null),n=_(null),d=_(null),s=_(""),l=ve({member_id:0,upline_id:0,position:""}),$=g(()=>{const v=s.value.trim().toLowerCase();return v===""?e.value:e.value.filter(M=>`${M.name} ${M.email} ${M.phone??""} ${M.username??""}`.toLowerCase().includes(v))});function y(v){u.value=v.uplineId,n.value=v.position,d.value=null,s.value="",i.value=!0}function a(v){if(!m.value){o.add({title:"Upline tidak valid",description:"Data customer login tidak tersedia.",color:"error",icon:"i-lucide-x-circle"});return}if(e.value.length===0){te.reload({only:["passiveMembers"],onSuccess:()=>{if(e.value.length===0){o.add({title:"Member pasif belum tersedia",description:"Tidak ada member status pasif yang bisa ditempatkan saat ini.",color:"warning",icon:"i-lucide-alert-circle"});return}y(v)}});return}y(v)}function T(){i.value=!1,u.value=null,n.value=null,d.value=null,s.value="",l.reset()}function S(v){d.value=v}function p(){if(!d.value||!n.value||!u.value){o.add({title:"Data belum lengkap",description:"Pilih member dan posisi placement terlebih dahulu.",color:"warning",icon:"i-lucide-alert-circle"});return}l.member_id=d.value.id,l.upline_id=u.value,l.position=n.value,l.post("/mlm/place-member",{preserveScroll:!0,onSuccess:()=>{o.add({title:"Placement berhasil",description:`${d.value?.name} ditempatkan ke posisi ${n.value==="left"?"kiri":"kanan"}.`,color:"success",icon:"i-lucide-check-circle-2"}),T(),te.reload({only:["binaryTree","networkTreeStats","activeMembers","passiveMembers","prospectMembers","hasLeft","hasRight"]})},onError:v=>{const M=typeof v.error=="string"?v.error:"Gagal memproses placement member.";o.add({title:"Placement gagal",description:M,color:"error",icon:"i-lucide-x-circle"})}})}return{showPlacementDialog:i,selectedUplineId:u,selectedPosition:n,selectedMember:d,memberSearchQuery:s,placementForm:l,filteredPassiveMembers:$,openPlacementDialog:a,closePlacementDialog:T,selectMember:S,placeMemberToBinaryTree:p}}function U(e){return e?1+U(e.left)+U(e.right):0}function G(e,m){if(!e)return null;if(e.id===m)return e;const o=G(e.left,m);return o||G(e.right,m)}function Z(e){return e?[{id:e.id,name:e.name,username:e.username,email:e.email??"-",package_name:e.package_name??"Member",level:e.level},...Z(e.left),...Z(e.right)]:[]}function Te(e,m){const o=_(null),i=_(""),u=_(!1),n=_(1),d=.65,s=1.6,l=_([]),$=g(()=>e.value??null),y=g(()=>$.value?o.value?G($.value,o.value)??$.value:$.value:null),a=g(()=>o.value!==null),T=g(()=>y.value),S=g(()=>Z($.value)),p=g(()=>{const b=S.value.map(C=>C.level);return b.length===0?0:Math.max(...b)}),v=g(()=>y.value?!a.value&&m.value?{totalDownlines:m.value.total_downlines,totalLeft:m.value.left_count,totalRight:m.value.right_count}:{totalDownlines:Math.max(0,U(y.value)-1),totalLeft:U(y.value.left),totalRight:U(y.value.right)}:{totalDownlines:0,totalLeft:0,totalRight:0}),M=g(()=>{const b=i.value.trim().toLowerCase();return b.length<2?[]:S.value.filter(C=>`${C.name} ${C.username} ${C.email} ${C.package_name}`.toLowerCase().includes(b)).slice(0,12)});function x(){o.value=null}function D(b){o.value=b,l.value=l.value.filter(C=>C!==b)}function A(b){if(l.value.includes(b)){l.value=l.value.filter(C=>C!==b);return}l.value=[...l.value,b]}function O(){l.value=[]}function V(){if(!y.value){l.value=[];return}l.value=Z(y.value).map(b=>b.id).filter(b=>b!==y.value?.id)}function j(){n.value=Math.min(s,Number((n.value+.1).toFixed(2)))}function K(){n.value=Math.max(d,Number((n.value-.1).toFixed(2)))}function R(){n.value=1}function q(){u.value=i.value.trim().length>=2}function J(b){i.value="",u.value=!1,D(b)}function L(){window.setTimeout(()=>{u.value=!1},120)}return{activeRootId:o,treeSearchQuery:i,showTreeSearchResults:u,zoom:n,collapsedIds:l,rootTree:$,currentTree:y,isViewingMemberTree:a,selectedMemberForTree:T,allMemberSearchData:S,maxLoadedLevel:p,currentStats:v,treeSearchResults:M,backToDefaultTree:x,focusToMember:D,toggleNode:A,expandAll:O,collapseAll:V,handleZoomIn:j,handleZoomOut:K,handleResetZoom:R,handleTreeSearchInput:q,selectTreeSearchResult:J,handleTreeSearchBlur:L}}const Se={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Me={class:"flex items-center gap-2 sm:gap-3"},Ce={class:"text-sm font-semibold text-highlighted sm:text-base"},Pe={class:"text-xs text-muted"},_e={class:"flex flex-wrap items-center gap-2"},Ie={class:"relative"},ze={key:0,class:"absolute right-0 top-full z-20 mt-1 w-72 overflow-hidden rounded-xl border border-default bg-default shadow-lg"},Ne={key:0,class:"p-3 text-sm text-muted"},Be=["onMousedown"],Ue={class:"truncate text-sm font-medium text-highlighted"},De={class:"truncate text-xs text-muted"},Re=B({__name:"NetworkHeaderControls",props:{isViewingMemberTree:{type:Boolean},selectedMemberForTree:{default:null},maxLoadedLevel:{},treeSearchQuery:{default:""},showTreeSearchResults:{type:Boolean,default:!1},treeSearchResults:{default:()=>[]}},emits:["back","update:treeSearchQuery","searchInput","searchFocus","searchBlur","selectSearchResult","expandAll","collapseAll","zoomOut","zoomIn","resetZoom"],setup(e,{emit:m}){const o=m;function i(u){o("update:treeSearchQuery",String(u??""))}return(u,n)=>{const d=X,s=le;return f(),w("div",Se,[t("div",Me,[e.isViewingMemberTree?(f(),I(d,{key:0,color:"neutral",variant:"outline",size:"xs",icon:"i-lucide-arrow-left",class:"rounded-xl",onClick:n[0]||(n[0]=l=>o("back"))},{default:h(()=>[...n[9]||(n[9]=[P(" Kembali ",-1)])]),_:1})):z("",!0),t("div",null,[t("p",Ce,k(e.isViewingMemberTree&&e.selectedMemberForTree?`Jaringan ${e.selectedMemberForTree.name}`:"Struktur Binary Tree MLM"),1),t("p",Pe,k(e.isViewingMemberTree&&e.selectedMemberForTree?`@${e.selectedMemberForTree.username}`:`Data model customer • depth termuat hingga level ${e.maxLoadedLevel}`),1)])]),t("div",_e,[t("div",Ie,[c(s,{"model-value":e.treeSearchQuery,icon:"i-lucide-search",placeholder:"Cari member...",size:"sm",class:"w-56","onUpdate:modelValue":i,onInput:n[1]||(n[1]=l=>o("searchInput")),onFocus:n[2]||(n[2]=l=>o("searchFocus")),onBlur:n[3]||(n[3]=l=>o("searchBlur"))},null,8,["model-value"]),e.showTreeSearchResults?(f(),w("div",ze,[e.treeSearchResults.length===0?(f(),w("div",Ne," Tidak ditemukan member. ")):z("",!0),(f(!0),w(Q,null,W(e.treeSearchResults,l=>(f(),w("button",{key:l.id,type:"button",class:"w-full border-b border-default px-3 py-2 text-left transition hover:bg-elevated/70 last:border-b-0",onMousedown:ge($=>o("selectSearchResult",l.id),["prevent"])},[t("p",Ue,k(l.name),1),t("p",De,"@"+k(l.username)+" • "+k(l.package_name),1)],40,Be))),128))])):z("",!0)]),c(d,{color:"neutral",variant:"outline",size:"sm",icon:"i-lucide-unfold-vertical",class:"rounded-xl",onClick:n[4]||(n[4]=l=>o("expandAll"))},{default:h(()=>[...n[10]||(n[10]=[P(" Expand ",-1)])]),_:1}),c(d,{color:"neutral",variant:"outline",size:"sm",icon:"i-lucide-fold-vertical",class:"rounded-xl",onClick:n[5]||(n[5]=l=>o("collapseAll"))},{default:h(()=>[...n[11]||(n[11]=[P(" Collapse ",-1)])]),_:1}),c(d,{color:"neutral",variant:"outline",size:"sm",icon:"i-lucide-zoom-out",class:"rounded-xl",onClick:n[6]||(n[6]=l=>o("zoomOut"))}),c(d,{color:"neutral",variant:"outline",size:"sm",icon:"i-lucide-zoom-in",class:"rounded-xl",onClick:n[7]||(n[7]=l=>o("zoomIn"))}),c(d,{color:"neutral",variant:"ghost",size:"sm",icon:"i-lucide-rotate-ccw",class:"rounded-xl",onClick:n[8]||(n[8]=l=>o("resetZoom"))})])])}}}),Le={class:"mt-4 space-y-3"},Fe={key:0,class:"rounded-2xl border border-dashed border-default p-6 text-center text-sm text-muted"},Ee={key:1,class:"max-h-80 space-y-2 overflow-auto pr-1"},Ze=["onClick"],Qe={class:"flex items-start justify-between gap-2"},Ae={class:"min-w-0"},Oe={class:"truncate text-sm font-semibold text-highlighted"},Ve={class:"truncate text-xs text-muted"},je={class:"truncate text-xs text-muted"},Ke={class:"text-[11px] text-muted"},qe={class:"flex w-full justify-end gap-2"},Je=B({__name:"NetworkPlacementModal",props:{open:{type:Boolean,default:!1},selectedPosition:{default:null},selectedUplineId:{default:null},memberSearchQuery:{default:""},filteredPassiveMembers:{default:()=>[]},selectedMemberId:{default:null},processing:{type:Boolean,default:!1}},emits:["update:open","update:memberSearchQuery","selectMember","submit","cancel"],setup(e,{emit:m}){const o=e,i=m,u=g({get:()=>o.open,set:s=>{i("update:open",s),s||i("cancel")}});function n(s){i("update:memberSearchQuery",String(s??""))}function d(s){if(!s)return"-";const l=new Date(s);return Number.isNaN(l.getTime())?s:new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"numeric"}).format(l)}return(s,l)=>{const $=ye,y=le,a=ne,T=X,S=ke;return f(),I(S,{open:u.value,"onUpdate:open":l[2]||(l[2]=p=>u.value=p),title:"Tempatkan Member ke Binary Tree",description:e.selectedPosition?`Posisi terpilih: ${e.selectedPosition==="left"?"Kiri":"Kanan"}`:""},{body:h(()=>[c($,{color:"neutral",variant:"subtle",icon:"i-lucide-info",class:"rounded-2xl",title:`Upline Node ID: ${e.selectedUplineId??"-"}`,description:"Pilih satu member pasif untuk placement pada node ini."},null,8,["title"]),t("div",Le,[c(y,{"model-value":e.memberSearchQuery,icon:"i-lucide-search",placeholder:"Cari nama, email, atau telepon...",size:"sm",class:"w-full","onUpdate:modelValue":n},null,8,["model-value"]),e.filteredPassiveMembers.length===0?(f(),w("div",Fe," Tidak ada member pasif yang cocok. ")):(f(),w("div",Ee,[(f(!0),w(Q,null,W(e.filteredPassiveMembers,p=>(f(),w("button",{key:p.id,type:"button",class:E(["w-full rounded-2xl border px-3 py-2 text-left transition",e.selectedMemberId===p.id?"border-primary bg-primary/10":"border-default hover:bg-elevated/60"]),onClick:v=>i("selectMember",p)},[t("div",Qe,[t("div",Ae,[t("p",Oe,k(p.name),1),t("p",Ve,k(p.email),1),t("p",je,k(p.phone??"-"),1),t("p",Ke,"Join: "+k(d(p.joined_at)),1)]),c(a,{color:p.has_purchase?"success":"neutral",variant:p.has_purchase?"soft":"subtle",size:"xs",class:"rounded-full"},{default:h(()=>[P(k(p.has_purchase?"Purchase":"No Purchase"),1)]),_:2},1032,["color","variant"])])],10,Ze))),128))]))])]),footer:h(()=>[t("div",qe,[c(T,{color:"neutral",variant:"outline",class:"rounded-xl",disabled:e.processing,onClick:l[0]||(l[0]=p=>i("cancel"))},{default:h(()=>[...l[3]||(l[3]=[P(" Batal ",-1)])]),_:1},8,["disabled"]),c(T,{color:"primary",class:"rounded-xl",loading:e.processing,disabled:!e.selectedMemberId||!e.selectedPosition||e.processing,onClick:l[1]||(l[1]=p=>i("submit"))},{default:h(()=>[...l[4]||(l[4]=[P(" Tempatkan ",-1)])]),_:1},8,["loading","disabled"])])]),_:1},8,["open","description"])}}}),Ge={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},He={class:"flex items-center justify-between"},We={class:"space-y-1"},Xe={class:"text-[10px] sm:text-xs font-bold uppercase tracking-widest text-gray-500 dark:text-gray-400"},Ye={class:"flex items-baseline gap-1"},et={class:"text-2xl sm:text-3xl font-black tracking-tighter text-gray-900 dark:text-white"},tt={class:"text-[10px] text-gray-400 hidden sm:block"},lt={class:"mt-4 h-1 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden"},nt=B({__name:"NetworkStatsCards",props:{stats:{}},setup(e){const m=e,o=g(()=>[{label:"Total Jaringan",value:m.stats.totalDownlines,icon:"i-lucide-users",color:"primary",description:"Akumulasi mitra aktif"},{label:"Kaki Kiri",value:m.stats.totalLeft,icon:"i-lucide-arrow-down-left",color:"blue",description:"Pertumbuhan sisi kiri"},{label:"Kaki Kanan",value:m.stats.totalRight,icon:"i-lucide-arrow-down-right",color:"emerald",description:"Pertumbuhan sisi kanan"}]);return(i,u)=>{const n=oe,d=H;return f(),w("div",Ge,[(f(!0),w(Q,null,W(o.value,s=>(f(),I(d,{key:s.label,class:"relative overflow-hidden group",ui:{root:"rounded-2xl transition-all duration-300 hover:shadow-sm",body:"p-4 sm:p-5"}},{default:h(()=>[t("div",{class:E(["absolute -right-4 -top-4 size-24 blur-3xl opacity-10 transition-opacity group-hover:opacity-20",s.color==="primary"?"bg-primary-500":s.color==="blue"?"bg-blue-500":"bg-emerald-500"])},null,2),t("div",He,[t("div",We,[t("p",Xe,k(s.label),1),t("div",Ye,[t("h3",et,k(s.value.toLocaleString("id-ID")),1),u[0]||(u[0]=t("span",{class:"text-[10px] font-medium text-gray-400"},"Mitra",-1))]),t("p",tt,k(s.description),1)]),t("div",{class:E(["p-2.5 rounded-xl ring-1 ring-inset shadow-xs transition-transform duration-500 group-hover:scale-110",[s.color==="primary"?"bg-primary-50 dark:bg-primary-950/50 ring-primary-500/20 text-primary-600":s.color==="blue"?"bg-blue-50 dark:bg-blue-950/50 ring-blue-500/20 text-blue-600":"bg-emerald-50 dark:bg-emerald-950/50 ring-emerald-500/20 text-emerald-600"]])},[c(n,{name:s.icon,class:"size-5 sm:size-6"},null,8,["name"])],2)]),t("div",lt,[t("div",{class:E(["h-full transition-all duration-1000",[s.color==="primary"?"bg-primary-500":s.color==="blue"?"bg-blue-500":"bg-emerald-500"]]),style:{width:"65%"}},null,2)])]),_:2},1024))),128))])}}}),ot={class:"flex flex-col items-center"},at={class:"space-y-2"},st={class:"flex items-start justify-between gap-2"},rt={class:"min-w-0"},it={class:"truncate text-sm font-semibold text-highlighted"},dt={class:"truncate text-[11px] text-muted"},ut={class:"flex items-center gap-1"},ct={class:"flex flex-wrap gap-1.5"},mt={key:0,class:"mt-4 w-full"},pt={class:"relative grid grid-cols-2 gap-4 px-2 sm:gap-8"},ft={class:"relative flex justify-center pt-4"},vt={class:"flex flex-col items-center gap-2 py-2 text-center"},gt={class:"relative flex justify-center pt-4"},xt={class:"flex flex-col items-center gap-2 py-2 text-center"},bt=B({name:"NetworkTreeNode",__name:"NetworkTreeNode",props:{node:{},depth:{default:1},maxDepth:{default:6},collapsedIds:{default:()=>[]},allowPlacement:{type:Boolean,default:!0}},emits:["memberClick","openPlacement","toggleExpand"],setup(e,{emit:m}){const o=e,i=m,u=g(()=>o.depth<o.maxDepth),n=g(()=>!!(o.node.left||o.node.right||o.node.has_children)),d=g(()=>o.collapsedIds.includes(o.node.id)),s=g(()=>u.value&&n.value&&!d.value),l=g(()=>o.node.package_name??"Member"),$=g(()=>`L${o.node.level}`);return(y,a)=>{const T=X,S=ne,p=H,v=xe("NetworkTreeNode",!0),M=oe;return f(),w("div",ot,[c(p,{class:"w-[260px] rounded-2xl border border-default shadow-sm"},{default:h(()=>[t("div",at,[t("div",st,[t("div",rt,[t("p",it,k(e.node.name),1),t("p",dt,"@"+k(e.node.username),1)]),t("div",ut,[n.value?(f(),I(T,{key:0,size:"xs",color:"neutral",variant:"ghost",icon:d.value?"i-lucide-plus":"i-lucide-minus",onClick:a[0]||(a[0]=x=>i("toggleExpand",e.node.id))},null,8,["icon"])):z("",!0),c(T,{size:"xs",color:"neutral",variant:"ghost",icon:"i-lucide-scan-search",onClick:a[1]||(a[1]=x=>i("memberClick",e.node.id))})])]),t("div",ct,[c(S,{color:"neutral",variant:"subtle",size:"xs",class:"rounded-full"},{default:h(()=>[P(k(l.value),1)]),_:1}),c(S,{color:"primary",variant:"subtle",size:"xs",class:"rounded-full"},{default:h(()=>[P(k($.value),1)]),_:1}),c(S,{color:"success",variant:"subtle",size:"xs",class:"rounded-full"},{default:h(()=>[P(" Kiri "+k(e.node.total_left),1)]),_:1}),c(S,{color:"info",variant:"subtle",size:"xs",class:"rounded-full"},{default:h(()=>[P(" Kanan "+k(e.node.total_right),1)]),_:1})])])]),_:1}),s.value?(f(),w("div",mt,[a[17]||(a[17]=t("div",{class:"mx-auto h-4 w-px bg-gray-300 dark:bg-gray-700"},null,-1)),t("div",pt,[a[16]||(a[16]=t("div",{class:"absolute left-1/4 right-1/4 top-0 h-px bg-gray-300 dark:bg-gray-700"},null,-1)),t("div",ft,[a[12]||(a[12]=t("div",{class:"absolute left-1/2 top-0 h-4 w-px -translate-x-1/2 bg-gray-300 dark:bg-gray-700"},null,-1)),e.node.left?(f(),I(v,{key:0,node:e.node.left,depth:e.depth+1,"max-depth":e.maxDepth,"collapsed-ids":e.collapsedIds,"allow-placement":e.allowPlacement,onMemberClick:a[2]||(a[2]=x=>i("memberClick",x)),onOpenPlacement:a[3]||(a[3]=x=>i("openPlacement",x)),onToggleExpand:a[4]||(a[4]=x=>i("toggleExpand",x))},null,8,["node","depth","max-depth","collapsed-ids","allow-placement"])):e.allowPlacement?(f(),I(p,{key:1,class:"w-[220px] rounded-2xl border border-dashed border-default bg-elevated/40"},{default:h(()=>[t("div",vt,[c(M,{name:"i-lucide-user-round-plus",class:"size-5 text-muted"}),a[11]||(a[11]=t("p",{class:"text-xs text-muted"},"Slot kiri kosong",-1)),c(T,{size:"xs",color:"primary",variant:"soft",icon:"i-lucide-plus",class:"rounded-xl",onClick:a[5]||(a[5]=x=>i("openPlacement",{uplineId:e.node.id,position:"left"}))},{default:h(()=>[...a[10]||(a[10]=[P(" Tempatkan ",-1)])]),_:1})])]),_:1})):z("",!0)]),t("div",gt,[a[15]||(a[15]=t("div",{class:"absolute left-1/2 top-0 h-4 w-px -translate-x-1/2 bg-gray-300 dark:bg-gray-700"},null,-1)),e.node.right?(f(),I(v,{key:0,node:e.node.right,depth:e.depth+1,"max-depth":e.maxDepth,"collapsed-ids":e.collapsedIds,"allow-placement":e.allowPlacement,onMemberClick:a[6]||(a[6]=x=>i("memberClick",x)),onOpenPlacement:a[7]||(a[7]=x=>i("openPlacement",x)),onToggleExpand:a[8]||(a[8]=x=>i("toggleExpand",x))},null,8,["node","depth","max-depth","collapsed-ids","allow-placement"])):e.allowPlacement?(f(),I(p,{key:1,class:"w-[220px] rounded-2xl border border-dashed border-default bg-elevated/40"},{default:h(()=>[t("div",xt,[c(M,{name:"i-lucide-user-round-plus",class:"size-5 text-muted"}),a[14]||(a[14]=t("p",{class:"text-xs text-muted"},"Slot kanan kosong",-1)),c(T,{size:"xs",color:"primary",variant:"soft",icon:"i-lucide-plus",class:"rounded-xl",onClick:a[9]||(a[9]=x=>i("openPlacement",{uplineId:e.node.id,position:"right"}))},{default:h(()=>[...a[13]||(a[13]=[P(" Tempatkan ",-1)])]),_:1})])]),_:1})):z("",!0)])])])):z("",!0)])}}}),ht={class:"rounded-2xl border border-default bg-elevated/20 p-2 sm:p-4"},kt={class:"overflow-auto"},yt={class:"min-w-max p-3 sm:p-5"},wt=B({__name:"NetworkTreePanel",props:{currentTree:{default:null},zoom:{},collapsedIds:{default:()=>[]},maxDepth:{default:6},allowPlacement:{type:Boolean,default:!0}},emits:["memberClick","openPlacement","toggleExpand"],setup(e,{emit:m}){const o=m;return(i,u)=>{const n=we;return f(),w("div",ht,[t("div",kt,[t("div",yt,[e.currentTree?(f(),w("div",{key:0,class:"mx-auto w-fit transition-transform duration-200",style:be({transform:`scale(${e.zoom})`,transformOrigin:"top center"})},[c(bt,{node:e.currentTree,"max-depth":e.maxDepth,"collapsed-ids":e.collapsedIds,"allow-placement":e.allowPlacement,onMemberClick:u[0]||(u[0]=d=>o("memberClick",d)),onOpenPlacement:u[1]||(u[1]=d=>o("openPlacement",d)),onToggleExpand:u[2]||(u[2]=d=>o("toggleExpand",d))},null,8,["node","max-depth","collapsed-ids","allow-placement"])],4)):(f(),I(n,{key:1,icon:"i-lucide-network",title:"Jaringan belum tersedia",description:"Belum ada data node tree untuk akun ini.",ui:{root:"rounded-2xl py-16"}}))])])])}}}),$t={class:"space-y-4 sm:space-y-6"},Tt={class:"space-y-4 p-4 sm:p-6"},St={class:"rounded-2xl border border-default bg-elevated/20 p-3"},Mt={class:"flex flex-col gap-2 text-xs text-muted sm:flex-row sm:items-center sm:justify-between"},At=B({__name:"Network",props:{binaryTree:{default:null},networkTreeStats:{default:null},passiveMembers:{default:()=>[]},currentCustomerId:{default:null}},setup(e){const m=e,o=g(()=>m.binaryTree??null),i=g(()=>m.networkTreeStats??null),u=g(()=>m.passiveMembers??[]),n=g(()=>m.currentCustomerId??null),{currentStats:d,isViewingMemberTree:s,selectedMemberForTree:l,maxLoadedLevel:$,treeSearchQuery:y,showTreeSearchResults:a,treeSearchResults:T,currentTree:S,zoom:p,collapsedIds:v,backToDefaultTree:M,focusToMember:x,toggleNode:D,expandAll:A,collapseAll:O,handleZoomIn:V,handleZoomOut:j,handleResetZoom:K,handleTreeSearchInput:R,selectTreeSearchResult:q,handleTreeSearchBlur:J}=Te(o,i),{showPlacementDialog:L,selectedUplineId:b,selectedPosition:C,selectedMember:Y,memberSearchQuery:ee,placementForm:ae,filteredPassiveMembers:se,openPlacementDialog:re,closePlacementDialog:ie,selectMember:de,placeMemberToBinaryTree:ue}=$e(u,n);function ce(N){y.value=N}function me(N){L.value=N}function pe(N){ee.value=N}return(N,F)=>{const fe=H;return f(),w(Q,null,[t("div",$t,[c(nt,{stats:r(d)},null,8,["stats"]),c(fe,{class:"overflow-hidden rounded-3xl"},{header:h(()=>[c(Re,{"is-viewing-member-tree":r(s),"selected-member-for-tree":r(l),"max-loaded-level":r($),"tree-search-query":r(y),"show-tree-search-results":r(a),"tree-search-results":r(T),onBack:r(M),"onUpdate:treeSearchQuery":ce,onSearchInput:r(R),onSearchFocus:r(R),onSearchBlur:r(J),onSelectSearchResult:r(q),onExpandAll:r(A),onCollapseAll:r(O),onZoomOut:r(j),onZoomIn:r(V),onResetZoom:r(K)},null,8,["is-viewing-member-tree","selected-member-for-tree","max-loaded-level","tree-search-query","show-tree-search-results","tree-search-results","onBack","onSearchInput","onSearchFocus","onSearchBlur","onSelectSearchResult","onExpandAll","onCollapseAll","onZoomOut","onZoomIn","onResetZoom"])]),default:h(()=>[t("div",Tt,[c(wt,{"current-tree":r(S),zoom:r(p),"collapsed-ids":r(v),"max-depth":6,onMemberClick:r(x),onOpenPlacement:r(re),onToggleExpand:r(D)},null,8,["current-tree","zoom","collapsed-ids","onMemberClick","onOpenPlacement","onToggleExpand"]),t("div",St,[t("div",Mt,[F[0]||(F[0]=t("p",null,"Klik node member untuk fokus subtree dan gunakan tombol expand/collapse untuk organization tree.",-1)),F[1]||(F[1]=t("p",null,"Placement hanya menampilkan member pasif yang belum ditempatkan.",-1)),t("p",null,"Zoom saat ini: "+k(Math.round(r(p)*100))+"%",1)])])])]),_:1})]),c(Je,{open:r(L),"selected-position":r(C),"selected-upline-id":r(b),"member-search-query":r(ee),"filtered-passive-members":r(se),"selected-member-id":r(Y)?.id??null,processing:r(ae).processing,"onUpdate:open":me,"onUpdate:memberSearchQuery":pe,onSelectMember:r(de),onSubmit:r(ue),onCancel:r(ie)},null,8,["open","selected-position","selected-upline-id","member-search-query","filtered-passive-members","selected-member-id","processing","onSelectMember","onSubmit","onCancel"])],64)}}});export{At as default};
