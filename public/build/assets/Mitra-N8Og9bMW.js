import{_ as A}from"./Card-Bg0Kv25I.js";import{U as ae,w as se,r as U,c as B,d as z,k as T,f as a,g as i,e as l,h as m,t as r,i as c,b as y,F as X,l as ee,x as W,j as $,u as n,v as Z}from"./app-Ct9AQz3a.js";import{u as ie}from"./useToast-DVWuh0M_.js";import{_ as O}from"./Badge-BrOriF3i.js";import{_ as L}from"./Icon-DLkENiec.js";import{_ as ne}from"./Input-DKYkVkaK.js";import{_ as Q}from"./Button-DlP5TfEn.js";import{_ as le}from"./Empty-C2M2wGtg.js";import{_ as te}from"./Modal-CxM2Yew6.js";import{_ as oe}from"./Alert-DqUIHgZi.js";import"./DialogTrigger-BCtGwlfO.js";import"./Presence-CTfVoSjs.js";import"./usePortal-BjiTY23K.js";import"./VisuallyHidden-BSn5Ae5a.js";import"./useLocale-QzNUJIp8.js";function re(t){const u=ie(),e=U("active"),p=U(""),f=B(()=>({active:t.activeMembers.value.length,passive:t.passiveMembers.value.length,prospect:t.prospectMembers.value.length})),b=B(()=>f.value.active+f.value.passive+f.value.prospect),s=B(()=>[{value:"active",label:"Aktif",icon:"i-lucide-check-circle-2",count:f.value.active},{value:"passive",label:"Pasif",icon:"i-lucide-clock",count:f.value.passive},{value:"prospect",label:"Prospek",icon:"i-lucide-user-plus",count:f.value.prospect}]),d=B(()=>e.value==="active"?t.activeMembers.value:e.value==="passive"?t.passiveMembers.value:t.prospectMembers.value),g=B(()=>{const o=p.value.trim().toLowerCase(),M=[...d.value];return o?M.filter(k=>[k.name,k.username??"",k.email??"",k.phone??"",k.package_name??"",k.position??"",String(k.level??""),String(k.total_left??""),String(k.total_right??"")].join(" ").toLowerCase().includes(o)):M}),v=B(()=>e.value==="active"?"Sudah ditempatkan di binary tree.":e.value==="passive"?"Belum ditempatkan, tapi sudah memiliki pembelian.":"Member baru, belum ditempatkan dan belum pembelian."),x=U(!1),h=U(null),_=U(!1),w=U(null),D=U(null),P=ae({member_id:0,upline_id:0,position:""}),V=B(()=>t.hasLeft.value),S=B(()=>t.hasRight.value),q=o=>{if(!o)return"-";const M=new Date(o);return Number.isNaN(M.getTime())?o:M.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})},I=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),R=o=>o?{color:o==="left"?"primary":"info",variant:"soft",text:o==="left"?"Kiri":"Kanan"}:{color:"neutral",variant:"subtle",text:"Belum Ditempatkan"},C=o=>o==="active"?{color:"success",icon:"i-lucide-check-circle-2",text:"Aktif"}:o==="passive"?{color:"neutral",icon:"i-lucide-clock",text:"Pasif"}:{color:"warning",icon:"i-lucide-user-plus",text:"Prospek"};function j(o){const M=o.has_placement===!0||!!o.position,k=o.has_purchase===!0;return M?{key:"active",...C("active")}:k?{key:"passive",...C("passive")}:{key:"prospect",...C("prospect")}}function E(o){h.value=o,x.value=!0}function F(){x.value=!1}function K(o){if(!t.currentCustomerId.value){u?.add?.({title:"Gagal membuka modal",description:"Data upline tidak ditemukan. Muat ulang halaman dan coba lagi.",color:"error",icon:"i-lucide-x-circle"});return}w.value=o,D.value=null,P.member_id=o.id,P.upline_id=t.currentCustomerId.value,P.position="",_.value=!0}const N=()=>{_.value=!1,w.value=null,D.value=null,P.reset()},G=()=>{if(!w.value||!D.value){u?.add?.({title:"Pilih posisi terlebih dahulu",color:"warning",icon:"i-lucide-alert-circle"});return}if(!P.upline_id){u?.add?.({title:"Gagal",description:"Data upline tidak valid.",color:"error",icon:"i-lucide-x-circle"});return}P.position=D.value,P.post("/mlm/place-member",{onSuccess:()=>{u?.add?.({title:"Berhasil",description:`${w.value?.name} ditempatkan di posisi ${D.value==="left"?"Kiri":"Kanan"}`,color:"success",icon:"i-lucide-check-circle-2"}),N()},onError:o=>{u?.add?.({title:"Gagal",description:o?.error||"Gagal menempatkan member ke binary tree",color:"error",icon:"i-lucide-x-circle"})}})};function H(){if(!h.value)return;const o=h.value;F(),K(o)}return se(x,o=>{o||(h.value=null)}),{activeTab:e,q:p,counts:f,totalMembers:b,tabs:s,filteredMembers:g,hintText:v,formatDate:q,formatCurrency:I,getPositionBadge:R,tabStatusBadge:C,memberState:j,isDetailOpen:x,detailMember:h,openDetail:E,closeDetail:F,showPlacementDialog:_,selectedMember:w,selectedPosition:D,placementForm:P,hasLeft:V,hasRight:S,openPlacementDialog:K,closePlacementDialog:N,placeToBinaryTree:G,openPlacementFromDetail:H}}const ce={class:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between"},de={class:"flex items-start gap-3"},me={class:"flex size-10 items-center justify-center rounded-2xl border border-default bg-elevated/60"},ue={class:"flex items-center gap-2"},be=z({__name:"MitraHeaderPanel",props:{totalMembers:{},activeTab:{},tabBadge:{}},setup(t){return(u,e)=>{const p=L,f=O;return c(),T("div",ce,[a("div",de,[a("div",me,[i(p,{name:"i-lucide-network",class:"size-5 text-primary"})]),e[0]||(e[0]=a("div",{class:"min-w-0"},[a("p",{class:"text-base font-semibold text-highlighted"},"Jaringan Member"),a("p",{class:"mt-0.5 text-sm text-muted"},"Kelola dan lihat member dalam jaringan Anda")],-1))]),a("div",ue,[i(f,{color:"neutral",variant:"subtle",class:"rounded-2xl"},{default:l(()=>[i(p,{name:"i-lucide-users",class:"mr-1 size-3.5"}),m(" "+r(t.totalMembers),1)]),_:1}),i(f,{color:t.activeTab==="active"?"success":t.activeTab==="passive"?"neutral":"warning",variant:"soft",class:"rounded-2xl hidden sm:inline-flex"},{default:l(()=>[i(p,{name:t.tabBadge.icon,class:"mr-1 size-3.5"},null,8,["name"]),m(" "+r(t.tabBadge.text),1)]),_:1},8,["color"])])])}}}),pe={class:"grid grid-cols-3 gap-2"},fe={class:"flex items-center justify-center gap-2"},ge={class:"text-xs sm:text-sm font-semibold text-highlighted"},ve={class:"mt-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},xe={class:"text-xs text-muted"},he=z({__name:"MitraFilterTabsCard",props:{tabs:{},activeTab:{},hintText:{},searchQuery:{}},emits:["update:activeTab","update:searchQuery"],setup(t,{emit:u}){const e=t,p=u;function f(b){p("update:searchQuery",String(b??""))}return(b,s)=>{const d=L,g=O,v=Q,x=ne,h=A;return c(),y(h,{class:"rounded-2xl",ui:{body:"p-2"}},{default:l(()=>[a("div",pe,[(c(!0),T(X,null,ee(e.tabs,_=>(c(),y(v,{key:_.value,block:"",color:"neutral",variant:"ghost",class:W(["rounded-xl py-2.5 px-2.5",e.activeTab===_.value?"bg-white dark:bg-gray-950 ring-1 ring-black/5 dark:ring-white/5":"hover:bg-white/70 dark:hover:bg-white/10"]),onClick:w=>p("update:activeTab",_.value)},{default:l(()=>[a("div",fe,[i(d,{name:_.icon,class:W(["size-4",e.activeTab===_.value?"text-primary":"text-muted"])},null,8,["name","class"]),a("span",ge,r(_.label),1),i(g,{color:"neutral",variant:"subtle",size:"xs",class:"rounded-xl"},{default:l(()=>[m(r(_.count),1)]),_:2},1024)])]),_:2},1032,["class","onClick"]))),128))]),a("div",ve,[a("p",xe,[i(d,{name:"i-lucide-info",class:"mr-1 inline-block size-3.5"}),m(" "+r(e.hintText),1)]),i(x,{"model-value":e.searchQuery,icon:"i-lucide-search",placeholder:"Cari nama, username, email, telepon...",size:"sm",class:"w-full sm:w-80","onUpdate:modelValue":f},null,8,["model-value"])])]),_:1})}}}),ye={class:"flex items-start justify-between gap-3"},ke={class:"min-w-0 flex-1"},_e={class:"flex flex-wrap items-center gap-2"},Me={class:"truncate text-sm sm:text-base font-semibold text-highlighted"},Be={class:"text-sm font-normal text-muted"},$e={class:"mt-2 grid gap-1 text-xs sm:text-sm text-muted"},we={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},Pe={class:"inline-flex items-center gap-1.5 min-w-0"},Te={class:"truncate"},De={key:0,class:"inline-flex items-center gap-1.5"},Ce={class:"truncate"},Ue={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},ze={key:0,class:"inline-flex items-center gap-1.5"},Se={class:"text-primary font-semibold"},je={class:"inline-flex items-center gap-1.5"},Le={key:0,class:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs"},Ie={class:"shrink-0 flex flex-col items-end gap-2"},Re={class:"flex items-center gap-2"},Fe={class:"flex flex-wrap items-center justify-end gap-1.5"},Ke=z({__name:"MitraMemberCard",props:{member:{},activeTab:{},hasLeft:{type:Boolean},hasRight:{type:Boolean},formatDate:{type:Function},formatCurrency:{type:Function},getPositionBadge:{type:Function},tabStatusBadge:{type:Function}},emits:["openDetail","placeMember"],setup(t,{emit:u}){const e=t,p=u;return(f,b)=>{const s=O,d=L,g=Q,v=A;return c(),y(v,{class:"rounded-2xl",ui:{root:"hover:bg-elevated/25 transition-colors"}},{default:l(()=>[a("div",ye,[a("div",ke,[a("div",_e,[a("p",Me,[m(r(e.member.name)+" ",1),a("span",Be,"(@"+r(e.member.username)+")",1)]),i(s,{color:e.getPositionBadge(e.member.position).color,variant:e.getPositionBadge(e.member.position).variant,class:"rounded-2xl"},{default:l(()=>[m(r(e.getPositionBadge(e.member.position).text),1)]),_:1},8,["color","variant"]),e.member.level?(c(),y(s,{key:0,color:"neutral",variant:"subtle",class:"rounded-2xl"},{default:l(()=>[m(" Level "+r(e.member.level),1)]),_:1})):$("",!0)]),a("div",$e,[a("div",we,[a("span",Pe,[i(d,{name:"i-lucide-mail",class:"size-4"}),a("span",Te,r(e.member.email),1)]),e.member.phone?(c(),T("span",De,[i(d,{name:"i-lucide-phone",class:"size-4"}),a("span",Ce,r(e.member.phone),1)])):$("",!0)]),a("div",Ue,[e.member.package_name?(c(),T("span",ze,[i(d,{name:"i-lucide-badge",class:"size-4"}),a("span",Se,"Paket: "+r(e.member.package_name),1)])):$("",!0),a("span",je,[i(d,{name:"i-lucide-calendar",class:"size-4"}),m(" Bergabung: "+r(e.formatDate(e.member.joined_at)),1)])]),(e.member.total_left??0)>0||(e.member.total_right??0)>0?(c(),T("div",Le,[i(s,{color:"info",variant:"subtle",class:"rounded-xl"},{default:l(()=>[m("Kiri: "+r(e.member.total_left??0),1)]),_:1}),i(s,{color:"success",variant:"subtle",class:"rounded-xl"},{default:l(()=>[m("Kanan: "+r(e.member.total_right??0),1)]),_:1})])):$("",!0)])]),a("div",Ie,[i(s,{color:e.tabStatusBadge(e.activeTab).color,variant:"soft",class:"rounded-2xl"},{default:l(()=>[i(d,{name:e.tabStatusBadge(e.activeTab).icon,class:"mr-1 size-3.5"},null,8,["name"]),m(" "+r(e.tabStatusBadge(e.activeTab).text),1)]),_:1},8,["color"]),a("div",{class:W(["text-xs sm:text-sm font-semibold tabular-nums",e.activeTab==="active"?"text-emerald-600 dark:text-emerald-400":e.activeTab==="passive"?"text-orange-600 dark:text-orange-400":"text-muted"])}," Omzet: "+r(e.formatCurrency(e.member.omzet??0)),3),a("div",Re,[i(g,{size:"xs",color:"neutral",variant:"outline",class:"rounded-xl",icon:"i-lucide-eye",onClick:b[0]||(b[0]=x=>p("openDetail",e.member))},{default:l(()=>[...b[2]||(b[2]=[m(" Detail ",-1)])]),_:1}),e.activeTab==="passive"&&(!e.hasLeft||!e.hasRight)?(c(),y(g,{key:0,size:"xs",color:"primary",variant:"soft",class:"rounded-xl",icon:"i-lucide-git-branch",onClick:b[1]||(b[1]=x=>p("placeMember",e.member))},{default:l(()=>[...b[3]||(b[3]=[m(" Tempatkan ",-1)])]),_:1})):$("",!0)]),a("div",Fe,[e.activeTab==="passive"&&e.member.has_purchase?(c(),y(s,{key:0,color:"primary",variant:"subtle",class:"rounded-xl"},{default:l(()=>[...b[4]||(b[4]=[m(" Sudah Belanja ",-1)])]),_:1})):$("",!0),e.activeTab==="prospect"&&!e.member.has_purchase?(c(),y(s,{key:1,color:"neutral",variant:"subtle",class:"rounded-xl"},{default:l(()=>[...b[5]||(b[5]=[m(" Belum Belanja ",-1)])]),_:1})):$("",!0)])])])]),_:1})}}}),Ne={key:1,class:"grid gap-3"},Ae=z({__name:"MitraMembersList",props:{members:{},activeTab:{},hasLeft:{type:Boolean},hasRight:{type:Boolean},formatDate:{type:Function},formatCurrency:{type:Function},getPositionBadge:{type:Function},tabStatusBadge:{type:Function}},emits:["openDetail","placeMember"],setup(t,{emit:u}){const e=t,p=u;function f(s){return s==="active"?"Belum ada member aktif":s==="passive"?"Belum ada member pasif":"Belum ada member prospek"}function b(s){return s==="active"?"Member aktif adalah member yang sudah ditempatkan di binary tree.":s==="passive"?"Member pasif adalah member yang belum ditempatkan di binary tree tapi sudah memiliki pembelian/order.":"Member prospek adalah member yang baru mendaftar, belum ditempatkan di binary tree dan belum memiliki pembelian/order."}return(s,d)=>{const g=le;return e.members.length===0?(c(),y(g,{key:0,icon:e.tabStatusBadge(e.activeTab).icon,title:f(e.activeTab),description:b(e.activeTab),variant:"outline",size:"lg",ui:{root:"rounded-2xl py-12"}},null,8,["icon","title","description"])):(c(),T("div",Ne,[(c(!0),T(X,null,ee(e.members,v=>(c(),y(Ke,{key:v.id,member:v,"active-tab":e.activeTab,"has-left":e.hasLeft,"has-right":e.hasRight,"format-date":e.formatDate,"format-currency":e.formatCurrency,"get-position-badge":e.getPositionBadge,"tab-status-badge":e.tabStatusBadge,onOpenDetail:d[0]||(d[0]=x=>p("openDetail",x)),onPlaceMember:d[1]||(d[1]=x=>p("placeMember",x))},null,8,["member","active-tab","has-left","has-right","format-date","format-currency","get-position-badge","tab-status-badge"]))),128))]))}}}),Oe={key:0,class:"space-y-4"},Qe={class:"flex flex-wrap items-center gap-2"},Ve={class:"grid gap-3 sm:grid-cols-2"},qe={class:"mt-2 space-y-1.5 text-sm"},Ee={class:"flex items-center justify-between gap-3"},Ge={class:"font-semibold text-highlighted"},He={class:"flex items-center justify-between gap-3"},Je={class:"font-semibold text-highlighted"},We={class:"flex items-center justify-between gap-3"},Xe={class:"font-semibold text-highlighted"},Ye={class:"mt-2 space-y-1.5 text-sm"},Ze={class:"flex items-center justify-between gap-3"},et={class:"font-semibold text-highlighted truncate"},tt={class:"flex items-center justify-between gap-3"},at={class:"font-semibold text-highlighted"},st={class:"flex items-center justify-between gap-3"},it={class:"text-sm font-black tabular-nums text-primary"},nt={class:"mt-3 grid gap-2 sm:grid-cols-3"},lt={class:"rounded-xl border border-default bg-elevated/10 px-3 py-2"},ot={class:"mt-0.5 text-sm font-bold tabular-nums text-highlighted"},rt={class:"rounded-xl border border-default bg-elevated/10 px-3 py-2"},ct={class:"mt-0.5 text-sm font-bold tabular-nums text-highlighted"},dt={class:"rounded-xl border border-default bg-elevated/10 px-3 py-2"},mt={class:"mt-0.5 text-sm font-bold text-highlighted"},ut={class:"flex w-full flex-col-reverse gap-2 sm:flex-row sm:items-center sm:justify-between"},bt=z({__name:"MitraDetailModal",props:{open:{type:Boolean},detailMember:{default:null},activeTab:{},hasLeft:{type:Boolean},hasRight:{type:Boolean},formatDate:{},formatCurrency:{},getPositionBadge:{},tabStatusBadge:{},memberState:{}},emits:["update:open","close","place-member"],setup(t,{emit:u}){const e=u;function p(){e("close"),e("update:open",!1)}function f(){e("place-member")}return(b,s)=>{const d=L,g=O,v=A,x=Q,h=te;return c(),y(h,{open:t.open,title:t.detailMember?`Detail Member: ${t.detailMember.name}`:"Detail Member",description:"Informasi lengkap member dalam jaringan.",scrollable:"",ui:{overlay:"fixed inset-0 z-[9998] bg-black/50 backdrop-blur-sm",content:"fixed z-[9999] w-full max-w-3xl"},"onUpdate:open":s[0]||(s[0]=_=>e("update:open",_))},{body:l(()=>[t.detailMember?(c(),T("div",Oe,[a("div",Qe,[i(g,{color:t.memberState(t.detailMember).color,variant:"soft",class:"rounded-2xl"},{default:l(()=>[i(d,{name:t.memberState(t.detailMember).icon,class:"mr-1 size-3.5"},null,8,["name"]),m(" "+r(t.memberState(t.detailMember).text),1)]),_:1},8,["color"]),i(g,{color:t.getPositionBadge(t.detailMember.position).color,variant:t.getPositionBadge(t.detailMember.position).variant,class:"rounded-2xl"},{default:l(()=>[m(r(t.getPositionBadge(t.detailMember.position).text),1)]),_:1},8,["color","variant"]),t.detailMember.level?(c(),y(g,{key:0,color:"neutral",variant:"subtle",class:"rounded-2xl"},{default:l(()=>[m(" Level "+r(t.detailMember.level),1)]),_:1})):$("",!0),t.detailMember.package_name?(c(),y(g,{key:1,color:"primary",variant:"subtle",class:"rounded-2xl"},{default:l(()=>[i(d,{name:"i-lucide-badge",class:"mr-1 size-3.5"}),m(" "+r(t.detailMember.package_name),1)]),_:1})):$("",!0),t.detailMember.has_purchase?(c(),y(g,{key:2,color:"primary",variant:"soft",class:"rounded-2xl"},{default:l(()=>[i(d,{name:"i-lucide-shopping-bag",class:"mr-1 size-3.5"}),s[1]||(s[1]=m(" Sudah Belanja ",-1))]),_:1})):$("",!0)]),a("div",Ve,[i(v,{class:"rounded-2xl",ui:{root:"border border-default bg-elevated/20",body:"p-3"}},{default:l(()=>[s[5]||(s[5]=a("p",{class:"text-xs font-bold uppercase tracking-wider text-muted"},"Identitas",-1)),a("div",qe,[a("p",Ee,[s[2]||(s[2]=a("span",{class:"text-muted"},"Nama",-1)),a("span",Ge,r(t.detailMember.name),1)]),a("p",He,[s[3]||(s[3]=a("span",{class:"text-muted"},"Username",-1)),a("span",Je,"@"+r(t.detailMember.username),1)]),a("p",We,[s[4]||(s[4]=a("span",{class:"text-muted"},"Bergabung",-1)),a("span",Xe,r(t.formatDate(t.detailMember.joined_at)),1)])])]),_:1}),i(v,{class:"rounded-2xl",ui:{root:"border border-default bg-elevated/20",body:"p-3"}},{default:l(()=>[s[8]||(s[8]=a("p",{class:"text-xs font-bold uppercase tracking-wider text-muted"},"Kontak",-1)),a("div",Ye,[a("p",Ze,[s[6]||(s[6]=a("span",{class:"text-muted"},"Email",-1)),a("span",et,r(t.detailMember.email),1)]),a("p",tt,[s[7]||(s[7]=a("span",{class:"text-muted"},"Telepon",-1)),a("span",at,r(t.detailMember.phone??"-"),1)])])]),_:1})]),i(v,{class:"rounded-2xl",ui:{root:"border border-default bg-elevated/20",body:"p-3"}},{default:l(()=>[a("div",st,[s[9]||(s[9]=a("p",{class:"text-xs font-bold uppercase tracking-wider text-muted"},"Ringkasan",-1)),a("p",it,r(t.formatCurrency(t.detailMember.omzet??0)),1)]),a("div",nt,[a("div",lt,[s[10]||(s[10]=a("p",{class:"text-[10px] font-extrabold uppercase tracking-wider text-muted"},"Downline kiri",-1)),a("p",ot,r(t.detailMember.total_left??0),1)]),a("div",rt,[s[11]||(s[11]=a("p",{class:"text-[10px] font-extrabold uppercase tracking-wider text-muted"},"Downline kanan",-1)),a("p",ct,r(t.detailMember.total_right??0),1)]),a("div",dt,[s[12]||(s[12]=a("p",{class:"text-[10px] font-extrabold uppercase tracking-wider text-muted"},"Posisi",-1)),a("p",mt,r(t.detailMember.position?t.detailMember.position==="left"?"Kiri":"Kanan":"Belum"),1)])])]),_:1})])):$("",!0)]),footer:l(()=>[a("div",ut,[i(x,{color:"neutral",variant:"outline",class:"rounded-xl",onClick:p},{default:l(()=>[...s[13]||(s[13]=[m(" Tutup ",-1)])]),_:1}),t.detailMember&&t.activeTab==="passive"&&(!t.hasLeft||!t.hasRight)?(c(),y(x,{key:0,color:"primary",variant:"soft",class:"rounded-xl",icon:"i-lucide-git-branch",onClick:f},{default:l(()=>[...s[14]||(s[14]=[m(" Tempatkan Member ",-1)])]),_:1})):$("",!0)])]),_:1},8,["open","title"])}}}),pt={class:"mt-4 grid grid-cols-2 gap-3"},ft={class:"flex flex-col items-center gap-2"},gt={class:"text-xs text-muted"},vt={class:"flex flex-col items-center gap-2"},xt={class:"text-xs text-muted"},ht={class:"flex justify-end gap-2"},yt=z({__name:"MitraPlacementModal",props:{open:{type:Boolean},selectedMember:{default:null},selectedPosition:{default:null},hasLeft:{type:Boolean},hasRight:{type:Boolean},processing:{type:Boolean},uplineId:{}},emits:["update:open","update:selectedPosition","close","submit"],setup(t,{emit:u}){const e=u;function p(){e("close"),e("update:open",!1)}function f(){e("submit")}return(b,s)=>{const d=oe,g=L,v=Q,x=te;return c(),y(x,{open:t.open,title:"Tempatkan Member ke Binary Tree",description:t.selectedMember?`Pilih posisi untuk menempatkan ${t.selectedMember.name} di jaringan binary tree Anda.`:"",ui:{overlay:"fixed inset-0 z-[9998] bg-black/50 backdrop-blur-sm",content:"fixed z-[9999] w-full max-w-lg"},"onUpdate:open":s[2]||(s[2]=h=>e("update:open",h))},{body:l(()=>[t.selectedMember?(c(),y(d,{key:0,icon:"i-lucide-info",color:"neutral",variant:"subtle",class:"rounded-2xl",title:`Menempatkan: ${t.selectedMember.name}`,description:`Upline ID: ${t.uplineId}`},null,8,["title","description"])):$("",!0),a("div",pt,[i(v,{block:"",size:"lg",color:"neutral",variant:"outline",class:"rounded-2xl py-6",disabled:t.hasLeft,ui:{base:t.selectedPosition==="left"?"ring-2 ring-primary":""},onClick:s[0]||(s[0]=h=>!t.hasLeft&&e("update:selectedPosition","left"))},{default:l(()=>[a("div",ft,[i(g,{name:"i-lucide-git-branch",class:"size-7 rotate-90"}),s[3]||(s[3]=a("div",{class:"text-sm font-semibold"},"Posisi Kiri",-1)),a("div",gt,r(t.hasLeft?"Sudah Terisi":"Left Position"),1)])]),_:1},8,["disabled","ui"]),i(v,{block:"",size:"lg",color:"neutral",variant:"outline",class:"rounded-2xl py-6",disabled:t.hasRight,ui:{base:t.selectedPosition==="right"?"ring-2 ring-primary":""},onClick:s[1]||(s[1]=h=>!t.hasRight&&e("update:selectedPosition","right"))},{default:l(()=>[a("div",vt,[i(g,{name:"i-lucide-git-branch",class:"size-7 -rotate-90"}),s[4]||(s[4]=a("div",{class:"text-sm font-semibold"},"Posisi Kanan",-1)),a("div",xt,r(t.hasRight?"Sudah Terisi":"Right Position"),1)])]),_:1},8,["disabled","ui"])]),t.selectedPosition?(c(),y(d,{key:1,class:"mt-4 rounded-2xl",color:"primary",variant:"soft",icon:"i-lucide-check",title:`Posisi terpilih: ${t.selectedPosition==="left"?"Kiri":"Kanan"}`,description:"Klik tombol Tempatkan untuk menyimpan perubahan."},null,8,["title"])):$("",!0)]),footer:l(()=>[a("div",ht,[i(v,{color:"neutral",variant:"outline",class:"rounded-xl",disabled:t.processing,onClick:p},{default:l(()=>[...s[5]||(s[5]=[m(" Batal ",-1)])]),_:1},8,["disabled"]),i(v,{color:"primary",class:"rounded-xl",disabled:!t.selectedPosition||t.processing,loading:t.processing,onClick:f},{default:l(()=>[...s[6]||(s[6]=[m(" Tempatkan ",-1)])]),_:1},8,["disabled","loading"])])]),_:1},8,["open","description"])}}}),kt={class:"space-y-4"},Rt=z({__name:"Mitra",props:{activeMembers:{default:()=>[]},passiveMembers:{default:()=>[]},prospectMembers:{default:()=>[]},hasLeft:{type:Boolean,default:!1},hasRight:{type:Boolean,default:!1},currentCustomerId:{default:null}},setup(t){const u=t,{activeTab:e,q:p,totalMembers:f,tabs:b,filteredMembers:s,hintText:d,formatDate:g,formatCurrency:v,getPositionBadge:x,tabStatusBadge:h,memberState:_,isDetailOpen:w,detailMember:D,openDetail:P,closeDetail:V,showPlacementDialog:S,selectedMember:q,selectedPosition:I,placementForm:R,hasLeft:C,hasRight:j,openPlacementDialog:E,closePlacementDialog:F,placeToBinaryTree:K,openPlacementFromDetail:N}=re({activeMembers:B(()=>u.activeMembers),passiveMembers:B(()=>u.passiveMembers),prospectMembers:B(()=>u.prospectMembers),hasLeft:B(()=>u.hasLeft),hasRight:B(()=>u.hasRight),currentCustomerId:B(()=>u.currentCustomerId)});function G(M){I.value=M}function H(M){e.value=M}function o(M){p.value=M}return(M,k)=>{const Y=A;return c(),T(X,null,[i(Y,{class:"rounded-3xl overflow-hidden"},{header:l(()=>[i(be,{"total-members":n(f),"active-tab":n(e),"tab-badge":n(h)(n(e))},null,8,["total-members","active-tab","tab-badge"])]),default:l(()=>[a("div",kt,[i(he,{tabs:n(b),"active-tab":n(e),"hint-text":n(d),"search-query":n(p),"onUpdate:activeTab":H,"onUpdate:searchQuery":o},null,8,["tabs","active-tab","hint-text","search-query"]),i(Ae,{members:n(s),"active-tab":n(e),"has-left":n(C),"has-right":n(j),"format-date":n(g),"format-currency":n(v),"get-position-badge":n(x),"tab-status-badge":n(h),onOpenDetail:n(P),onPlaceMember:n(E)},null,8,["members","active-tab","has-left","has-right","format-date","format-currency","get-position-badge","tab-status-badge","onOpenDetail","onPlaceMember"])])]),_:1}),i(bt,{open:n(w),"onUpdate:open":k[0]||(k[0]=J=>Z(w)?w.value=J:null),"detail-member":n(D),"active-tab":n(e),"has-left":n(C),"has-right":n(j),"format-date":n(g),"format-currency":n(v),"get-position-badge":n(x),"tab-status-badge":n(h),"member-state":n(_),onClose:n(V),onPlaceMember:n(N)},null,8,["open","detail-member","active-tab","has-left","has-right","format-date","format-currency","get-position-badge","tab-status-badge","member-state","onClose","onPlaceMember"]),i(yt,{open:n(S),"onUpdate:open":k[1]||(k[1]=J=>Z(S)?S.value=J:null),"selected-member":n(q),"selected-position":n(I),"has-left":n(C),"has-right":n(j),processing:n(R).processing,"upline-id":n(R).upline_id,"onUpdate:selectedPosition":G,onClose:n(F),onSubmit:n(K)},null,8,["open","selected-member","selected-position","has-left","has-right","processing","upline-id","onClose","onSubmit"])],64)}}});export{Rt as default};
