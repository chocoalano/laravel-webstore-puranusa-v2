import{u as D}from"./useDashboard-P1BsVIhj.js";import{N as T,I as l,c as f,d as g,k as b,g as c,e as m,f as a,t as p,i as _,b as v,u}from"./app-Ct9AQz3a.js";import{_ as h}from"./Card-Bg0Kv25I.js";import{_ as C}from"./Table-CtuFXPy6.js";import{_ as k}from"./Icon-DLkENiec.js";import"./index-CygXWxiy.js";import"./useLocale-QzNUJIp8.js";function B(e){if(!e)return"-";const n=new Date(e);return Number.isNaN(n.getTime())?e:new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(n)}function R(e){return e>=100?"success":e>=60?"warning":"error"}function $(e){const{formatIDR:n}=D(),t=f(()=>e.lifetimeRewards.value.summary),i=f(()=>e.lifetimeRewards.value.rewards),o=f(()=>e.lifetimeRewards.value.claimed),d=T("UBadge");return{summary:t,rewards:i,claimed:o,rewardColumns:[{id:"name",accessorKey:"name",header:"Reward",cell:({row:s})=>{const r=s.original,x=r.is_claimed?"Sudah Diklaim":r.can_claim?"Siap Klaim":"Belum Tercapai";return l("div",{class:"min-w-0 space-y-1"},[l("p",{class:"truncate text-sm font-semibold text-highlighted"},r.name),l("p",{class:"truncate text-xs text-muted"},r.reward&&r.reward!==""?r.reward:"-"),l("p",{class:"text-[11px] text-muted"},x)])}},{id:"bv",accessorKey:"bv",header:"Target BV",meta:{class:{th:"text-right",td:"text-right"}},cell:({row:s})=>l("span",{class:"font-mono text-xs text-muted"},s.original.bv.toLocaleString("id-ID"))},{id:"progress",accessorKey:"progress_percent",header:"Progress",cell:({row:s})=>{const r=s.original,x=`${r.progress_percent.toFixed(2)}%`;return l("div",{class:"min-w-0 space-y-1"},[l(d,{color:R(r.progress_percent),variant:"subtle",size:"xs",class:"rounded-full"},()=>x),l("p",{class:"truncate text-[11px] text-muted"},`Kiri ${n(r.accumulated_left)}`),l("p",{class:"truncate text-[11px] text-muted"},`Kanan ${n(r.accumulated_right)}`)])}},{id:"status",accessorKey:"can_claim",header:"Status",cell:({row:s})=>{const r=s.original,x=r.is_claimed?"neutral":r.can_claim?"success":"warning",K=r.is_claimed?"Claimed":r.can_claim?"Can Claim":"Locked";return l(d,{color:x,variant:"subtle",size:"sm",class:"rounded-full"},()=>K)}}],claimedColumns:[{id:"created_at",accessorKey:"created_at",header:"Tanggal",cell:({row:s})=>l("span",{class:"text-sm text-muted"},B(s.original.created_at))},{id:"reward",accessorKey:"reward",header:"Reward",cell:({row:s})=>l("div",{class:"min-w-0 space-y-1"},[l("p",{class:"truncate text-sm font-semibold text-highlighted"},s.original.reward??"-"),l("p",{class:"truncate text-xs text-muted"},s.original.description??"-")])},{id:"bv",accessorKey:"bv",header:"BV",meta:{class:{th:"text-right",td:"text-right"}},cell:({row:s})=>l("span",{class:"font-mono text-xs text-muted"},s.original.bv.toLocaleString("id-ID"))},{id:"amount",accessorKey:"amount",header:"Nominal",meta:{class:{th:"text-right",td:"text-right"}},cell:({row:s})=>l("span",{class:"font-bold text-primary tabular-nums"},n(s.original.amount))},{id:"status",accessorKey:"status",header:"Status",cell:({row:s})=>l(d,{color:s.original.status==="released"?"success":"warning",variant:"subtle",size:"sm",class:"rounded-full"},()=>s.original.status_label)}],formatIDR:n}}const S={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-5"},L={class:"mt-1 text-lg font-bold text-highlighted"},I={class:"mt-1 text-lg font-bold text-highlighted"},U={class:"mt-1 text-lg font-bold text-emerald-600 dark:text-emerald-400"},z={class:"mt-1 text-lg font-bold text-primary"},N={class:"mt-1 text-lg font-bold text-amber-600 dark:text-amber-400"},j=g({__name:"LifetimeSummaryCards",props:{summary:{},formatCurrency:{type:Function}},setup(e){return(n,t)=>{const i=h;return _(),b("div",S,[c(i,{class:"rounded-2xl"},{default:m(()=>[t[0]||(t[0]=a("p",{class:"text-[11px] uppercase tracking-wider text-muted"},"Omzet Kiri Plan B",-1)),a("p",L,p(e.formatCurrency(e.summary.accumulated_left)),1)]),_:1}),c(i,{class:"rounded-2xl"},{default:m(()=>[t[1]||(t[1]=a("p",{class:"text-[11px] uppercase tracking-wider text-muted"},"Omzet Kanan Plan B",-1)),a("p",I,p(e.formatCurrency(e.summary.accumulated_right)),1)]),_:1}),c(i,{class:"rounded-2xl"},{default:m(()=>[t[2]||(t[2]=a("p",{class:"text-[11px] uppercase tracking-wider text-muted"},"Siap Klaim",-1)),a("p",U,p(e.summary.eligible_count),1)]),_:1}),c(i,{class:"rounded-2xl"},{default:m(()=>[t[3]||(t[3]=a("p",{class:"text-[11px] uppercase tracking-wider text-muted"},"Sudah Diklaim",-1)),a("p",z,p(e.summary.claimed_count),1)]),_:1}),c(i,{class:"rounded-2xl"},{default:m(()=>[t[4]||(t[4]=a("p",{class:"text-[11px] uppercase tracking-wider text-muted"},"Sisa Target",-1)),a("p",N,p(e.summary.remaining_count),1)]),_:1})])}}}),V={class:"flex flex-col items-center justify-center py-10"},F=g({__name:"LifetimeRewardsTableCard",props:{rewards:{},columns:{}},setup(e){return(n,t)=>{const i=k,o=C,d=h;return _(),v(d,{class:"overflow-hidden rounded-2xl",ui:{body:"p-0 sm:p-0",header:"px-4 py-4"}},{header:m(()=>[...t[0]||(t[0]=[a("div",{class:"flex items-center justify-between gap-3"},[a("div",null,[a("h3",{class:"text-base font-bold text-highlighted"},"Lifetime Rewards"),a("p",{class:"text-xs text-muted"},"Target reward berdasarkan akumulasi omzet group kiri dan kanan.")])],-1)])]),default:m(()=>[c(o,{data:e.rewards,columns:e.columns,class:"w-full"},{empty:m(()=>[a("div",V,[c(i,{name:"i-lucide-trophy",class:"mb-2 size-8 text-muted"}),t[1]||(t[1]=a("p",{class:"text-sm text-muted"},"Belum ada master lifetime reward aktif.",-1))])]),_:1},8,["data","columns"])]),_:1})}}}),P={class:"flex flex-col items-center justify-center py-10"},O=g({__name:"LifetimeClaimedTableCard",props:{claimed:{},columns:{}},setup(e){return(n,t)=>{const i=k,o=C,d=h;return _(),v(d,{class:"overflow-hidden rounded-2xl",ui:{body:"p-0 sm:p-0",header:"px-4 py-4"}},{header:m(()=>[...t[0]||(t[0]=[a("div",{class:"flex items-center justify-between gap-3"},[a("div",null,[a("h3",{class:"text-base font-bold text-highlighted"},"Riwayat Klaim Lifetime"),a("p",{class:"text-xs text-muted"},"Data klaim reward lifetime dari transaksi bonus reward.")])],-1)])]),default:m(()=>[c(o,{data:e.claimed,columns:e.columns,class:"w-full"},{empty:m(()=>[a("div",P,[c(i,{name:"i-lucide-history",class:"mb-2 size-8 text-muted"}),t[1]||(t[1]=a("p",{class:"text-sm text-muted"},"Belum ada riwayat klaim lifetime.",-1))])]),_:1},8,["data","columns"])]),_:1})}}}),E={class:"space-y-6"},W=g({__name:"Lifetime",props:{lifetimeRewards:{default:()=>({summary:{accumulated_left:0,accumulated_right:0,eligible_count:0,claimed_count:0,remaining_count:0},rewards:[],claimed:[]})}},setup(e){const n=e,{summary:t,rewards:i,claimed:o,rewardColumns:d,claimedColumns:y,formatIDR:w}=$({lifetimeRewards:f(()=>n.lifetimeRewards)});return(s,r)=>(_(),b("div",E,[c(j,{summary:u(t),"format-currency":u(w)},null,8,["summary","format-currency"]),c(F,{rewards:u(i),columns:u(d)},null,8,["rewards","columns"]),c(O,{claimed:u(o),columns:u(y)},null,8,["claimed","columns"])]))}});export{W as default};
