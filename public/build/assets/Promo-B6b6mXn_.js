import{_ as I,P as V,t as A,g as j}from"./Icon-Uxy1xgtf.js";import{y as Q,W as L,X as M,w as O,b as T,e as k,i,k as p,x as y,j as v,f as r,z as S,h as q,t as _,C as R,S as G,u as g,c as z,r as U,A as H,d as P,g as m,Y as K,F,l as D}from"./app-DJZGi31V.js";import{a as X,_ as B}from"./Button-BybYutMJ.js";import{_ as Y}from"./SelectMenu-DpWUqat9.js";import{_ as W}from"./Input-CPATCwRy.js";import{_ as E}from"./Badge-BA966FKQ.js";import{_ as J}from"./Skeleton-CKD-pPAP.js";import{_ as Z}from"./Card-4ZveMfXH.js";import"./usePortal-C1-08-0T.js";import"./Presence-BEIDQvWP.js";import"./VisuallyHidden-CER-Nb7v.js";import"./PopperArrow-CWvISw3c.js";import"./utils-B4CAbWlJ.js";import"./VisuallyHiddenInput-BglKthas.js";import"./index-feEp0Oia.js";import"./useLocale-DLCHvZlb.js";const ee={slots:{root:"relative flex rounded-lg",spotlight:"absolute inset-0 rounded-[inherit] pointer-events-none bg-default/90",container:"relative flex flex-col flex-1 lg:grid gap-x-8 gap-y-4 p-4 sm:p-6",wrapper:"flex flex-col flex-1 items-start",header:"mb-4",body:"flex-1",footer:"pt-4 mt-auto",leading:"inline-flex items-center mb-2.5",leadingIcon:"size-5 shrink-0 text-primary",title:"text-base text-pretty font-semibold text-highlighted",description:"text-[15px] text-pretty"},variants:{orientation:{horizontal:{container:"lg:grid-cols-2 lg:items-center"},vertical:{container:""}},reverse:{true:{wrapper:"order-last"}},variant:{solid:{root:"bg-inverted text-inverted",title:"text-inverted",description:"text-dimmed"},outline:{root:"bg-default ring ring-default",description:"text-muted"},soft:{root:"bg-elevated/50",description:"text-toned"},subtle:{root:"bg-elevated/50 ring ring-default",description:"text-toned"},ghost:{description:"text-muted"},naked:{container:"p-0 sm:p-0",description:"text-muted"}},to:{true:{root:["has-focus-visible:ring-2 has-focus-visible:ring-primary","transition"]}},title:{true:{description:"mt-1"}},highlight:{true:{root:"ring-2"}},highlightColor:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},spotlight:{true:{root:"[--spotlight-size:400px] before:absolute before:-inset-px before:pointer-events-none before:rounded-[inherit] before:bg-[radial-gradient(var(--spotlight-size)_var(--spotlight-size)_at_calc(var(--spotlight-x,0px))_calc(var(--spotlight-y,0px)),var(--spotlight-color),transparent_70%)]"}},spotlightColor:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""}},compoundVariants:[{variant:"solid",to:!0,class:{root:"hover:bg-inverted/90"}},{variant:"outline",to:!0,class:{root:"hover:bg-elevated/50"}},{variant:"soft",to:!0,class:{root:"hover:bg-elevated"}},{variant:"subtle",to:!0,class:{root:"hover:bg-elevated"}},{variant:"subtle",to:!0,highlight:!1,class:{root:"hover:ring-accented"}},{variant:"ghost",to:!0,class:{root:"hover:bg-elevated/50"}},{highlightColor:"primary",highlight:!0,class:{root:"ring-primary"}},{highlightColor:"secondary",highlight:!0,class:{root:"ring-secondary"}},{highlightColor:"success",highlight:!0,class:{root:"ring-success"}},{highlightColor:"info",highlight:!0,class:{root:"ring-info"}},{highlightColor:"warning",highlight:!0,class:{root:"ring-warning"}},{highlightColor:"error",highlight:!0,class:{root:"ring-error"}},{highlightColor:"neutral",highlight:!0,class:{root:"ring-inverted"}},{spotlightColor:"primary",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-primary)]"}},{spotlightColor:"secondary",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-secondary)]"}},{spotlightColor:"success",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-success)]"}},{spotlightColor:"info",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-info)]"}},{spotlightColor:"warning",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-warning)]"}},{spotlightColor:"error",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-error)]"}},{spotlightColor:"neutral",spotlight:!0,class:{root:"[--spotlight-color:var(--ui-bg-inverted)]"}}],defaultVariants:{variant:"outline",highlightColor:"primary",spotlightColor:"primary"}},te=Object.assign({inheritAttrs:!1},{__name:"PageCard",props:{as:{type:null,required:!1},icon:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},orientation:{type:null,required:!1,default:"vertical"},reverse:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},highlightColor:{type:null,required:!1},spotlight:{type:Boolean,required:!1},spotlightColor:{type:null,required:!1},variant:{type:null,required:!1},to:{type:null,required:!1},target:{type:[String,Object,null],required:!1},onClick:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(o){const t=o,e=Q(),n=U(),h=L(),a=H(),{elementX:d,elementY:u}=M(n,{eventFilter:h.eventFilter}),f=z(()=>t.spotlight&&(d.value!==0||u.value!==0));O(()=>t.spotlight,c=>{c?h.resume():h.pause()},{immediate:!0});const l=z(()=>A({extend:A(ee),...a.ui?.pageCard||{}})({orientation:t.orientation,reverse:t.reverse,variant:t.variant,to:!!t.to||!!t.onClick,title:!!t.title||!!e.title,highlight:t.highlight,highlightColor:t.highlightColor,spotlight:f.value,spotlightColor:t.spotlightColor})),b=z(()=>(e.title&&j(e.title())||t.title||"Card link").trim());return(c,w)=>(i(),T(g(V),{ref_key:"cardRef",ref:n,as:o.as,"data-orientation":o.orientation,"data-slot":"root",class:y(l.value.root({class:[t.ui?.root,t.class]})),style:G(f.value&&{"--spotlight-x":`${g(d)}px`,"--spotlight-y":`${g(u)}px`}),onClick:o.onClick},{default:k(()=>[t.spotlight?(i(),p("div",{key:0,"data-slot":"spotlight",class:y(l.value.spotlight({class:t.ui?.spotlight}))},null,2)):v("",!0),r("div",{"data-slot":"container",class:y(l.value.container({class:t.ui?.container}))},[e.header||o.icon||e.leading||e.body||o.title||e.title||o.description||e.description||e.footer?(i(),p("div",{key:0,"data-slot":"wrapper",class:y(l.value.wrapper({class:t.ui?.wrapper}))},[e.header?(i(),p("div",{key:0,"data-slot":"header",class:y(l.value.header({class:t.ui?.header}))},[S(c.$slots,"header")],2)):v("",!0),o.icon||e.leading?(i(),p("div",{key:1,"data-slot":"leading",class:y(l.value.leading({class:t.ui?.leading}))},[S(c.$slots,"leading",{ui:l.value},()=>[o.icon?(i(),T(I,{key:0,name:o.icon,"data-slot":"leadingIcon",class:y(l.value.leadingIcon({class:t.ui?.leadingIcon}))},null,8,["name","class"])):v("",!0)])],2)):v("",!0),e.body||o.title||e.title||o.description||e.description?(i(),p("div",{key:2,"data-slot":"body",class:y(l.value.body({class:t.ui?.body}))},[S(c.$slots,"body",{},()=>[o.title||e.title?(i(),p("div",{key:0,"data-slot":"title",class:y(l.value.title({class:t.ui?.title}))},[S(c.$slots,"title",{},()=>[q(_(o.title),1)])],2)):v("",!0),o.description||e.description?(i(),p("div",{key:1,"data-slot":"description",class:y(l.value.description({class:t.ui?.description}))},[S(c.$slots,"description",{},()=>[q(_(o.description),1)])],2)):v("",!0)])],2)):v("",!0),e.footer?(i(),p("div",{key:3,"data-slot":"footer",class:y(l.value.footer({class:t.ui?.footer}))},[S(c.$slots,"footer")],2)):v("",!0)],2)):v("",!0),S(c.$slots,"default")],2),o.to?(i(),T(X,R({key:1,"aria-label":b.value},{to:o.to,target:o.target,...c.$attrs},{class:"focus:outline-none peer",raw:""}),{default:k(()=>[...w[0]||(w[0]=[r("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1)])]),_:1},16,["aria-label"])):v("",!0)]),_:3},8,["as","data-orientation","class","style","onClick"]))}});function oe(o){return o?Date.parse(o)<Date.now():!1}function le(o){const t=U(""),e=U("all"),n=U(!0),h=U(null),a={voucher:{label:"Voucher",color:"primary",icon:"i-lucide-ticket",accentClass:"bg-primary",iconClass:"text-primary"},discount:{label:"Diskon",color:"success",icon:"i-lucide-percent",accentClass:"bg-emerald-500",iconClass:"text-emerald-500"},flash:{label:"Flash Sale",color:"warning",icon:"i-lucide-zap",accentClass:"bg-amber-500",iconClass:"text-amber-500"},shipping:{label:"Gratis Ongkir",color:"info",icon:"i-lucide-truck",accentClass:"bg-sky-500",iconClass:"text-sky-500"},bundle:{label:"Bundle",color:"neutral",icon:"i-lucide-package",accentClass:"bg-indigo-500",iconClass:"text-indigo-500"},member:{label:"Exclusive",color:"primary",icon:"i-lucide-crown",accentClass:"bg-fuchsia-500",iconClass:"text-fuchsia-500"}},d=z(()=>[{label:"Semua Tipe",value:"all",icon:"i-lucide-layers"},...Object.entries(a).map(([s,x])=>({label:x.label,value:s,icon:x.icon}))]),u=z(()=>e.value==="all"?"i-lucide-filter":a[e.value].icon),f=z(()=>{let s=[...o.promos.value];e.value!=="all"&&(s=s.filter(C=>C.type===e.value));const x=t.value.trim().toLowerCase();return x!==""&&(s=s.filter(C=>C.title.toLowerCase().includes(x)||String(C.code??"").toLowerCase().includes(x))),n.value&&(s=s.filter(C=>!oe(C.expires_at))),s.sort((C,$)=>+!!$.highlight-+!!C.highlight)});function l(s){if(!s)return"Selamanya";const x=Date.parse(s);return Number.isNaN(x)?s:`Hingga ${new Date(x).toLocaleDateString("id-ID",{month:"short",day:"numeric"})}`}let b=null;async function c(s){!s||typeof navigator>"u"||!navigator.clipboard||(await navigator.clipboard.writeText(s),h.value=s,b&&clearTimeout(b),b=setTimeout(()=>{h.value=null},2e3))}function w(){t.value="",e.value="all",n.value=!0}return{searchQuery:t,selectedType:e,onlyAvailable:n,copiedCode:h,typeMeta:a,typeItems:d,selectedTypeIcon:u,filteredPromos:f,formatExpiry:l,copyCode:c,resetFilters:w}}const ae={class:"flex flex-col gap-6"},re={class:"flex items-end justify-between"},ie={class:"flex flex-col md:flex-row gap-3"},se={class:"flex gap-2"},ne=P({__name:"PromoHeaderFilters",props:{filteredCount:{},searchQuery:{},selectedType:{},onlyAvailable:{type:Boolean},selectedTypeIcon:{},typeItems:{}},emits:["update:searchQuery","update:selectedType","update:onlyAvailable"],setup(o,{emit:t}){const e=o,n=t;function h(d){n("update:searchQuery",String(d??""))}function a(d){n("update:selectedType",String(d??"all"))}return(d,u)=>{const f=E,l=W,b=I,c=Y,w=B;return i(),p("section",ae,[r("div",re,[u[1]||(u[1]=r("div",null,[r("h2",{class:"text-2xl font-bold tracking-tight text-neutral-900 dark:text-white"},"Daftar Promo"),r("p",{class:"text-neutral-500 text-sm"},"Kelola dan gunakan promo aktif Anda di sini.")],-1)),m(f,{variant:"subtle",size:"lg",class:"hidden sm:flex font-mono"},{default:k(()=>[q(_(e.filteredCount)+" Aktif ",1)]),_:1})]),r("div",ie,[m(l,{"model-value":e.searchQuery,icon:"i-lucide-search",placeholder:"Cari nama promo atau kode...",class:"flex-1",size:"md","onUpdate:modelValue":h},null,8,["model-value"]),r("div",se,[m(c,{"model-value":e.selectedType,items:e.typeItems,"value-key":"value",class:"w-48",size:"md","onUpdate:modelValue":a},{leading:k(()=>[m(b,{name:e.selectedTypeIcon},null,8,["name"])]),_:1},8,["model-value","items"]),m(w,{variant:e.onlyAvailable?"solid":"outline",color:e.onlyAvailable?"primary":"neutral",icon:"i-lucide-clock-check",label:"Aktif",size:"md",onClick:u[0]||(u[0]=s=>n("update:onlyAvailable",!e.onlyAvailable))},null,8,["variant","color"])])])])}}}),ce={key:0,class:"absolute -top-2 -right-2 z-10"},de={class:"space-y-4"},ue={class:"flex items-start justify-between gap-2"},pe={class:"flex items-center gap-2 p-2 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg"},ge={class:"font-bold text-neutral-900 dark:text-white line-clamp-1 uppercase tracking-tight"},me={class:"text-xs text-neutral-500 mt-1 line-clamp-2 leading-relaxed"},he={class:"flex items-center gap-2 bg-neutral-50 dark:bg-neutral-900 p-2 rounded-xl border border-neutral-100 dark:border-neutral-800"},fe={class:"flex-1 px-2"},ye={class:"font-mono font-bold text-sm tracking-widest"},ve={class:"flex items-center justify-between pt-2 border-t border-neutral-100 dark:border-neutral-800"},be={class:"flex items-center gap-1.5 text-neutral-500"},xe={class:"text-[11px] font-medium"},Ce={key:0,class:"text-[11px] font-bold text-primary-500"},ke=P({__name:"PromoCardItem",props:{promo:{},meta:{},copiedCode:{},formatExpiry:{type:Function}},emits:["copyCode"],setup(o,{emit:t}){const e=o,n=t;return(h,a)=>{const d=E,u=I,f=B,l=Z;return i(),T(l,{class:"group relative transition-all duration-300 hover:-translate-y-1 overflow-visible",ui:{root:"ring-1 ring-neutral-200 dark:ring-neutral-800 shadow-none hover:shadow-xl hover:ring-primary-500/50",header:"p-0 overflow-hidden rounded-t-xl",body:"p-5"}},K({header:k(()=>[r("div",{class:y(["h-2 w-full",e.meta.accentClass])},null,2)]),default:k(()=>[e.promo.highlight?(i(),p("div",ce,[m(d,{color:"primary",variant:"solid",size:"sm",class:"shadow-lg rounded-lg shadow-primary-500/20"},{default:k(()=>[...a[1]||(a[1]=[q(" Populer ",-1)])]),_:1})])):v("",!0),r("div",de,[r("div",ue,[r("div",pe,[m(u,{name:e.meta.icon,class:y(["size-5",e.meta.iconClass])},null,8,["name","class"])]),m(d,{variant:"subtle",color:e.meta.color,size:"xs"},{default:k(()=>[q(_(e.meta.label),1)]),_:1},8,["color"])]),r("div",null,[r("h4",ge,_(e.promo.title),1),r("p",me,_(e.promo.description),1)]),r("div",he,[r("div",fe,[a[2]||(a[2]=r("span",{class:"text-[10px] text-neutral-400 font-bold uppercase block"},"Kode Promo",-1)),r("span",ye,_(e.promo.code||"Otomatis"),1)]),e.promo.code?(i(),T(f,{key:0,icon:e.copiedCode===e.promo.code?"i-lucide-check":"i-lucide-copy",color:e.copiedCode===e.promo.code?"success":"neutral",variant:"ghost",size:"sm",onClick:a[0]||(a[0]=b=>n("copyCode",e.promo.code))},null,8,["icon","color"])):v("",!0)]),r("div",ve,[r("div",be,[m(u,{name:"i-lucide-calendar",class:"size-3.5"}),r("span",xe,_(e.formatExpiry(e.promo.expires_at)),1)]),e.promo.quota_left?(i(),p("div",Ce," Sisa "+_(e.promo.quota_left),1)):v("",!0)])])]),_:2},[e.promo.to?{name:"footer",fn:k(()=>[m(f,{to:e.promo.to,block:"",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-arrow-right",size:"sm"},{default:k(()=>[...a[3]||(a[3]=[q(" Gunakan Promo ",-1)])]),_:1},8,["to"])]),key:"0"}:void 0]),1024)}}}),_e={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},we={key:1,class:"flex flex-col items-center justify-center py-20 border-2 border-dashed border-neutral-200 dark:border-neutral-800 rounded-3xl"},$e={class:"p-4 bg-neutral-100 dark:bg-neutral-900 rounded-full mb-4"},Se={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Te=P({__name:"PromoCardsGrid",props:{loading:{type:Boolean,default:!1},promos:{},copiedCode:{},typeMeta:{},formatExpiry:{}},emits:["copyCode","resetFilters"],setup(o,{emit:t}){const e=o,n=t;return(h,a)=>{const d=J,u=I,f=B;return e.loading?(i(),p("div",_e,[(i(),p(F,null,D(6,l=>m(d,{key:l,class:"h-48 w-full rounded-xl"})),64))])):e.promos.length===0?(i(),p("div",we,[r("div",$e,[m(u,{name:"i-lucide-ticket-dash",class:"size-10 text-neutral-400"})]),a[2]||(a[2]=r("h3",{class:"text-lg font-semibold"},"Tidak Ada Promo",-1)),a[3]||(a[3]=r("p",{class:"text-neutral-500 max-w-xs text-center text-sm mt-1"},"Coba sesuaikan filter atau kata kunci pencarian Anda.",-1)),m(f,{label:"Lihat Semua",variant:"link",class:"mt-2",onClick:a[0]||(a[0]=l=>n("resetFilters"))})])):(i(),p("div",Se,[(i(!0),p(F,null,D(e.promos,l=>(i(),T(ke,{key:l.id,promo:l,meta:e.typeMeta[l.type],"copied-code":e.copiedCode,"format-expiry":e.formatExpiry,onCopyCode:a[1]||(a[1]=b=>n("copyCode",b))},null,8,["promo","meta","copied-code","format-expiry"]))),128))]))}}}),Re=P({__name:"Promo",props:{promos:{default:()=>[]},loading:{type:Boolean,default:!1}},setup(o){const t=o,{searchQuery:e,selectedType:n,onlyAvailable:h,copiedCode:a,typeMeta:d,typeItems:u,selectedTypeIcon:f,filteredPromos:l,formatExpiry:b,copyCode:c,resetFilters:w}=le({promos:z(()=>t.promos)});function s($){e.value=$}function x($){n.value=$}function C($){h.value=$}return($,ze)=>{const N=te;return i(),T(N,{class:"space-y-8 p-1"},{default:k(()=>[m(ne,{"filtered-count":g(l).length,"search-query":g(e),"selected-type":g(n),"only-available":g(h),"selected-type-icon":g(f),"type-items":g(u),"onUpdate:searchQuery":s,"onUpdate:selectedType":x,"onUpdate:onlyAvailable":C},null,8,["filtered-count","search-query","selected-type","only-available","selected-type-icon","type-items"]),m(Te,{loading:o.loading,promos:g(l),"copied-code":g(a),"type-meta":g(d),"format-expiry":g(b),onCopyCode:g(c),onResetFilters:g(w)},null,8,["loading","promos","copied-code","type-meta","format-expiry","onCopyCode","onResetFilters"])]),_:1})}}});export{Re as default};
